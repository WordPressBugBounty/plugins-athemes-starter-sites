"use strict";
(globalThis["webpackChunkathemes_starter_sites"] = globalThis["webpackChunkathemes_starter_sites"] || []).push([["v2_onboarding_src_components_Steps_Customize_js"],{

/***/ "./node_modules/@wordpress/icons/build-module/library/desktop.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@wordpress/icons/build-module/library/desktop.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ desktop_default)
/* harmony export */ });
/* harmony import */ var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/primitives */ "@wordpress/primitives");
/* harmony import */ var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-runtime */ "react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__);
// packages/icons/src/library/desktop.tsx


var desktop_default = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__.SVG, { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__.Path, { d: "M20.5 16h-.7V8c0-1.1-.9-2-2-2H6.2c-1.1 0-2 .9-2 2v8h-.7c-.8 0-1.5.7-1.5 1.5h20c0-.8-.7-1.5-1.5-1.5zM5.7 8c0-.3.2-.5.5-.5h11.6c.3 0 .5.2.5.5v7.6H5.7V8z" }) });

//# sourceMappingURL=desktop.js.map


/***/ }),

/***/ "./node_modules/@wordpress/icons/build-module/library/mobile.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@wordpress/icons/build-module/library/mobile.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ mobile_default)
/* harmony export */ });
/* harmony import */ var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/primitives */ "@wordpress/primitives");
/* harmony import */ var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-runtime */ "react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__);
// packages/icons/src/library/mobile.tsx


var mobile_default = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__.SVG, { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__.Path, { d: "M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z" }) });

//# sourceMappingURL=mobile.js.map


/***/ }),

/***/ "./node_modules/@wordpress/icons/build-module/library/rotate-left.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@wordpress/icons/build-module/library/rotate-left.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ rotate_left_default)
/* harmony export */ });
/* harmony import */ var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/primitives */ "@wordpress/primitives");
/* harmony import */ var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-runtime */ "react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__);
// packages/icons/src/library/rotate-left.tsx


var rotate_left_default = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__.SVG, { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__.Path, { d: "M12 4V2.2L9 4.8l3 2.5V5.5c3.6 0 6.5 2.9 6.5 6.5 0 2.9-1.9 5.3-4.5 6.2v.2l-.1-.2c-.4.1-.7.2-1.1.2l.2 1.5c.3 0 .6-.1 1-.2 3.5-.9 6-4 6-7.7 0-4.4-3.6-8-8-8zm-7.9 7l1.5.2c.1-1.2.5-2.3 1.2-3.2l-1.1-.9C4.8 8.2 4.3 9.6 4.1 11zm1.5 1.8l-1.5.2c.1.7.3 1.4.5 2 .3.7.6 1.3 1 1.8l1.2-.8c-.3-.5-.6-1-.8-1.5s-.4-1.1-.4-1.7zm1.5 5.5c1.1.9 2.4 1.4 3.8 1.6l.2-1.5c-1.1-.1-2.2-.5-3.1-1.2l-.9 1.1z" }) });

//# sourceMappingURL=rotate-left.js.map


/***/ }),

/***/ "./node_modules/@wordpress/icons/build-module/library/tablet.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@wordpress/icons/build-module/library/tablet.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ tablet_default)
/* harmony export */ });
/* harmony import */ var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/primitives */ "@wordpress/primitives");
/* harmony import */ var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-runtime */ "react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__);
// packages/icons/src/library/tablet.tsx


var tablet_default = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__.SVG, { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__.Path, { d: "M17 4H7c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H7c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h10c.3 0 .5.2.5.5v12zm-7.5-.5h4V16h-4v1.5z" }) });

//# sourceMappingURL=tablet.js.map


/***/ }),

/***/ "./node_modules/@wordpress/icons/build-module/library/trash.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@wordpress/icons/build-module/library/trash.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ trash_default)
/* harmony export */ });
/* harmony import */ var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/primitives */ "@wordpress/primitives");
/* harmony import */ var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-runtime */ "react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__);
// packages/icons/src/library/trash.tsx


var trash_default = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__.SVG, { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(
  _wordpress_primitives__WEBPACK_IMPORTED_MODULE_0__.Path,
  {
    fillRule: "evenodd",
    clipRule: "evenodd",
    d: "M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"
  }
) });

//# sourceMappingURL=trash.js.map


/***/ }),

/***/ "./v2/onboarding/src/assets/images/crown.svg":
/*!***************************************************!*\
  !*** ./v2/onboarding/src/assets/images/crown.svg ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ReactComponent: () => (/* binding */ SvgCrown),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
var _path;
function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }

var SvgCrown = function SvgCrown(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg", _extends({
    xmlns: "http://www.w3.org/2000/svg",
    width: 16,
    height: 13,
    fill: "none"
  }, props), _path || (_path = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    fill: "#335EEA",
    d: "M15.777 2.844a1.08 1.08 0 0 1-1.093 1.094h-.028l-1.394 7.601c-.055.41-.438.711-.848.711h-9.05c-.41 0-.794-.3-.848-.71L1.12 3.937h-.027A1.08 1.08 0 0 1 0 2.843C0 2.242.492 1.75 1.094 1.75c.574 0 1.094.492 1.094 1.094 0 .246-.11.465-.247.656l2.461 1.969a.875.875 0 0 0 1.313-.301L7.3 2.023c-.301-.191-.52-.52-.52-.93C6.781.494 7.273 0 7.902 0 8.504 0 8.97.492 8.97 1.094c0 .41-.219.738-.547.93l1.586 3.144c.246.492.902.629 1.34.3L13.78 3.5a1.3 1.3 0 0 1-.191-.656 1.08 1.08 0 0 1 1.094-1.094c.601 0 1.093.492 1.093 1.094"
  })));
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAxNiAxMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xNS43NzczIDIuODQzNzVDMTUuNzc3MyAzLjQ3MjY2IDE1LjI4NTIgMy45Mzc1IDE0LjY4MzYgMy45Mzc1QzE0LjY1NjIgMy45Mzc1IDE0LjY1NjIgMy45Mzc1IDE0LjY1NjIgMy45Mzc1TDEzLjI2MTcgMTEuNTM5MUMxMy4yMDcgMTEuOTQ5MiAxMi44MjQyIDEyLjI1IDEyLjQxNDEgMTIuMjVIMy4zNjMyOEMyLjk1MzEyIDEyLjI1IDIuNTcwMzEgMTEuOTQ5MiAyLjUxNTYyIDExLjUzOTFMMS4xMjEwOSAzLjkzNzVDMS4xMjEwOSAzLjkzNzUgMS4xMjEwOSAzLjkzNzUgMS4wOTM3NSAzLjkzNzVDMC40OTIxODggMy45Mzc1IDAgMy40NzI2NiAwIDIuODQzNzVDMCAyLjI0MjE5IDAuNDkyMTg4IDEuNzUgMS4wOTM3NSAxLjc1QzEuNjY3OTcgMS43NSAyLjE4NzUgMi4yNDIxOSAyLjE4NzUgMi44NDM3NUMyLjE4NzUgMy4wODk4NCAyLjA3ODEyIDMuMzA4NTkgMS45NDE0MSAzLjVMNC40MDIzNCA1LjQ2ODc1QzQuODM5ODQgNS43OTY4OCA1LjQ2ODc1IDUuNjYwMTYgNS43MTQ4NCA1LjE2Nzk3TDcuMzAwNzggMi4wMjM0NEM3IDEuODMyMDMgNi43ODEyNSAxLjUwMzkxIDYuNzgxMjUgMS4wOTM3NUM2Ljc4MTI1IDAuNDkyMTg4IDcuMjczNDQgMCA3LjkwMjM0IDBDOC41MDM5MSAwIDguOTY4NzUgMC40OTIxODggOC45Njg3NSAxLjA5Mzc1QzguOTY4NzUgMS41MDM5MSA4Ljc1IDEuODMyMDMgOC40MjE4OCAyLjAyMzQ0TDEwLjAwNzggNS4xNjc5N0MxMC4yNTM5IDUuNjYwMTYgMTAuOTEwMiA1Ljc5Njg4IDExLjM0NzcgNS40Njg3NUwxMy43ODEyIDMuNUMxMy42NzE5IDMuMzA4NTkgMTMuNTg5OCAzLjA4OTg0IDEzLjU4OTggMi44NDM3NUMxMy41ODk4IDIuMjQyMTkgMTQuMDU0NyAxLjc1IDE0LjY4MzYgMS43NUMxNS4yODUyIDEuNzUgMTUuNzc3MyAyLjI0MjE5IDE1Ljc3NzMgMi44NDM3NVoiIGZpbGw9IiMzMzVFRUEiLz4NCjwvc3ZnPg==");

/***/ }),

/***/ "./v2/onboarding/src/components/Controls/CustomColorsControl.js":
/*!**********************************************************************!*\
  !*** ./v2/onboarding/src/components/Controls/CustomColorsControl.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/element */ "@wordpress/element");
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/i18n */ "@wordpress/i18n");
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @wordpress/components */ "@wordpress/components");
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _wordpress_icons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @wordpress/icons */ "./node_modules/@wordpress/icons/build-module/library/rotate-left.js");
/* harmony import */ var _utils_color_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/color-utils */ "./v2/onboarding/src/utils/color-utils.js");
/* harmony import */ var _utils_preview_bridge__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/preview-bridge */ "./v2/onboarding/src/utils/preview-bridge.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react/jsx-runtime */ "react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__);
/**
 * Custom Colors Control component.
 *
 * @package Athemes Starter Sites
 */








/**
 * Custom Colors Control component.
 *
 * @param {Object}   props                     Component props.
 * @param {string}   props.label               Label for the control.
 * @param {Array}    props.colorSchemes        Array of color scheme objects.
 * @param {string}   props.value               Currently selected color scheme ID.
 * @param {Function} props.onChange            Callback when selection changes.
 * @param {Function} props.onCustomColors      Callback when custom colors are generated.
 * @param {Object}   props.customColors        Previously saved custom colors (if any).
 * @param {string}   props.customPrimaryColor  Previously saved primary color (if any).
 * @param {Function} props.onPrimaryColorChange Callback when primary color changes.
 * @param {string}   props.themeName           Theme name (sydney, botiga, etc.) for generating CSS variables.
 * @return {JSX.Element} CustomColorsControl component.
 */

function CustomColorsControl({
  label,
  colorSchemes = [],
  value,
  onChange,
  onCustomColors,
  customColors = {},
  customPrimaryColor: savedPrimaryColor = '',
  onPrimaryColorChange,
  themeName = 'sydney'
}) {
  const [customPrimaryColor, setCustomPrimaryColor] = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(savedPrimaryColor || '#cf2c2c');
  const [generatedColors, setGeneratedColors] = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(customColors);
  const [contrastWarnings, setContrastWarnings] = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)([]);
  const [isPickerOpen, setIsPickerOpen] = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(false);
  const colorSwatchRef = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);

  /**
   * Get the first 3 colors from a color scheme.
   *
   * @param {Object} scheme Color scheme object with colors property.
   * @return {Array} Array of color values.
   */
  const getFirstThreeColors = scheme => {
    if (!scheme || !scheme.colors) {
      return [];
    }
    const colorValues = Object.values(scheme.colors);
    return colorValues.slice(0, 3);
  };

  /**
   * Handle color scheme selection.
   *
   * @param {string} schemeId The ID of the selected color scheme.
   */
  const handleSelect = schemeId => {
    if (onChange) {
      onChange(schemeId);
    }
  };

  /**
   * Handle reset action.
   */
  const handleReset = () => {
    if (onChange) {
      onChange('');
    }
    // Reset custom colors state
    setCustomPrimaryColor('#cf2c2c');
    setGeneratedColors({});
    setContrastWarnings([]);
    if (onCustomColors) {
      onCustomColors({});
    }
    if (onPrimaryColorChange) {
      onPrimaryColorChange('');
    }
    // Reset colors in the preview iframe
    _utils_preview_bridge__WEBPACK_IMPORTED_MODULE_5__["default"].resetColors();
  };

  /**
   * Handle custom primary color change.
   *
   * @param {string} color The new primary color.
   */
  const handlePrimaryColorChange = color => {
    setCustomPrimaryColor(color);

    // Generate the color scheme with the theme name for proper CSS variable format
    const scheme = (0,_utils_color_utils__WEBPACK_IMPORTED_MODULE_4__.generateColorScheme)(color, themeName);
    setGeneratedColors(scheme.colors);
    setContrastWarnings(scheme.warnings);

    // Notify parent component of generated colors and primary color
    if (onCustomColors) {
      onCustomColors(scheme.colors);
    }
    if (onPrimaryColorChange) {
      onPrimaryColorChange(color);
    }
  };

  /**
   * Sync state with props from parent when they change.
   * Only sync if we're not on custom mode, or if the colors are actually custom-generated.
   */
  (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    // Only sync customColors from props if we're not in custom mode
    // When in custom mode, we generate colors from primary color instead
    if (value !== 'custom' && customColors && Object.keys(customColors).length > 0) {
      setGeneratedColors(customColors);
    }
  }, [customColors, value]);
  (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    if (savedPrimaryColor) {
      setCustomPrimaryColor(savedPrimaryColor);
    }
  }, [savedPrimaryColor]);

  /**
   * Generate colors when custom is selected.
   * This runs when switching to custom mode, ensuring we always show generated colors.
   */
  (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    if (value === 'custom') {
      // Always regenerate colors when switching to custom mode
      // This ensures we show the palette based on the primary color, not the last scheme
      const scheme = (0,_utils_color_utils__WEBPACK_IMPORTED_MODULE_4__.generateColorScheme)(customPrimaryColor, themeName);
      setGeneratedColors(scheme.colors);
      setContrastWarnings(scheme.warnings);

      // Notify parent component of generated colors and primary color
      if (onCustomColors) {
        onCustomColors(scheme.colors);
      }
      if (onPrimaryColorChange) {
        onPrimaryColorChange(customPrimaryColor);
      }
    }
  }, [value, customPrimaryColor, themeName, onCustomColors, onPrimaryColorChange]);
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div", {
    className: "atss-control atss-custom-colors-control",
    children: [label && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div", {
      className: "atss-control__label-wrapper flex items-center",
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("label", {
        className: "atss-control__label text-sm font-medium",
        children: label
      }), value && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button", {
        type: "button",
        className: "atss-control__reset-button",
        onClick: handleReset,
        "aria-label": (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('Reset selection', 'athemes-starter-sites'),
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.Icon, {
          icon: _wordpress_icons__WEBPACK_IMPORTED_MODULE_3__["default"]
        })
      })]
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div", {
      className: "atss-colors-control__grid",
      children: [colorSchemes.map(scheme => {
        const colors = getFirstThreeColors(scheme);
        const isSelected = value === scheme.id;
        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button", {
          type: "button",
          className: `atss-colors-control__option ${isSelected ? 'atss-colors-control__option--selected' : ''}`,
          onClick: () => handleSelect(scheme.id),
          "aria-label": scheme.name,
          "aria-pressed": isSelected,
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div", {
            className: "atss-colors-control__circles",
            children: colors.map((color, index) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("span", {
              className: "atss-colors-control__circle",
              style: {
                backgroundColor: color
              }
            }, index))
          })
        }, scheme.id);
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button", {
        type: "button",
        className: `atss-colors-control__option atss-colors-control__option--custom ${value === 'custom' ? 'atss-colors-control__option--selected' : ''}`,
        onClick: () => handleSelect('custom'),
        "aria-label": (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('Custom Colors', 'athemes-starter-sites'),
        "aria-pressed": value === 'custom',
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div", {
          className: "atss-colors-control__circles",
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("span", {
            className: "atss-colors-control__circle atss-colors-control__circle--dashed"
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("span", {
            className: "atss-colors-control__circle atss-colors-control__circle--dashed"
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("span", {
            className: "atss-colors-control__circle atss-colors-control__circle--dashed"
          })]
        })
      })]
    }), value === 'custom' && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div", {
      className: "atss-colors-control__custom-panel",
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div", {
        className: "atss-colors-control__picker-section",
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("label", {
          className: "atss-colors-control__picker-label",
          children: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('Pick a Primary Color', 'athemes-starter-sites')
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div", {
          className: "atss-colors-control__picker-row",
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div", {
            className: "atss-colors-control__picker-trigger",
            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button", {
              ref: colorSwatchRef,
              type: "button",
              className: "atss-colors-control__color-swatch",
              onClick: () => setIsPickerOpen(!isPickerOpen),
              "aria-expanded": isPickerOpen,
              "aria-label": (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('Select color', 'athemes-starter-sites'),
              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("span", {
                className: "atss-colors-control__color-preview",
                style: {
                  backgroundColor: customPrimaryColor
                }
              })
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("input", {
              type: "text",
              className: "atss-colors-control__color-input",
              value: customPrimaryColor,
              onChange: e => handlePrimaryColorChange(e.target.value),
              placeholder: "#cf2c2c"
            }), isPickerOpen && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.Popover, {
              anchor: colorSwatchRef.current,
              placement: "top-start",
              offset: 10,
              onClose: () => setIsPickerOpen(false),
              className: "atss-colors-control__picker-popover",
              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.ColorPicker, {
                color: customPrimaryColor,
                onChange: handlePrimaryColorChange,
                enableAlpha: false,
                copyFormat: "hex"
              })
            })]
          })
        })]
      }), contrastWarnings.length > 0 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div", {
        className: "atss-colors-control__warnings",
        children: contrastWarnings.map((warning, index) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("p", {
          className: "atss-colors-control__warning",
          children: warning.message
        }, index))
      }), Object.keys(generatedColors).length > 0 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div", {
        className: "atss-colors-control__swatches",
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div", {
          className: "atss-colors-control__swatches-grid",
          children: Object.entries(generatedColors).map(([key, color]) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div", {
            className: "atss-colors-control__swatch",
            style: {
              backgroundColor: color
            },
            title: color
          }, key))
        })
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("p", {
        className: "atss-colors-control__helper-text",
        children: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('You can adjust the color palette later from the Customizer.', 'athemes-starter-sites')
      })]
    })]
  });
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CustomColorsControl);

/***/ }),

/***/ "./v2/onboarding/src/components/Controls/CustomizeUpsell.js":
/*!******************************************************************!*\
  !*** ./v2/onboarding/src/components/Controls/CustomizeUpsell.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/i18n */ "@wordpress/i18n");
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/components */ "@wordpress/components");
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_components__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _assets_images_crown_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../assets/images/crown.svg */ "./v2/onboarding/src/assets/images/crown.svg");
/* harmony import */ var _utils_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/config */ "./v2/onboarding/src/utils/config.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react/jsx-runtime */ "react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__);
/**
 * Customize Upsell component.
 *
 * @package Athemes Starter Sites
 */






/**
 * Customize Upsell component - displays pro template upgrade notice.
 *
 * @param {Object}  props           Component props.
 * @param {boolean} props.isVisible Whether to show the upsell.
 * @param {string}  props.upgradeUrl The upgrade URL with UTM parameters.
 * @return {JSX.Element|null} CustomizeUpsell component or null.
 */

function CustomizeUpsell({
  isVisible = false,
  upgradeUrl = _utils_config__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_UPGRADE_URL
}) {
  if (!isVisible) {
    return null;
  }
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div", {
    className: "atss-customize-upsell",
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div", {
      className: "atss-customize-upsell__box",
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div", {
        className: "atss-customize-upsell__header flex items-center gap-xs",
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("img", {
          src: _assets_images_crown_svg__WEBPACK_IMPORTED_MODULE_2__["default"],
          alt: "",
          className: "atss-customize-upsell__icon",
          "aria-hidden": "true",
          width: "16",
          height: "13"
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("span", {
          className: "atss-customize-upsell__title font-medium text-sm",
          children: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)('Pro Template', 'athemes-starter-sites')
        })]
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("p", {
        className: "atss-customize-upsell__description text-xs text-secondary",
        children: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)('You\'ve selected a Pro template! Unlock this design and many more by upgrading to Pro!', 'athemes-starter-sites')
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(_wordpress_components__WEBPACK_IMPORTED_MODULE_1__.Button, {
        variant: "primary",
        href: upgradeUrl,
        target: "_blank",
        rel: "noopener noreferrer",
        className: "atss-onboarding-wizard__btn w100 justify-center",
        children: [(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)('Upgrade to Pro', 'athemes-starter-sites'), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("span", {
          className: "atss-onboarding-wizard__btn-arrow",
          children: "\u2192"
        })]
      })]
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("p", {
      className: "atss-customize-upsell__note text-xs text-tertiary",
      children: [(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)('If you are an existing Pro user, please get the premium version of the plugin from your', 'athemes-starter-sites'), ' ', /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("a", {
        href: _utils_config__WEBPACK_IMPORTED_MODULE_3__.ACCOUNT_URL,
        target: "_blank",
        rel: "noopener noreferrer",
        className: "atss-customize-upsell__link",
        children: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)('account', 'athemes-starter-sites')
      })]
    })]
  });
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CustomizeUpsell);

/***/ }),

/***/ "./v2/onboarding/src/components/Controls/DevicePreviewControl.js":
/*!***********************************************************************!*\
  !*** ./v2/onboarding/src/components/Controls/DevicePreviewControl.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/components */ "@wordpress/components");
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_components__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_icons__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/icons */ "./node_modules/@wordpress/icons/build-module/library/desktop.js");
/* harmony import */ var _wordpress_icons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @wordpress/icons */ "./node_modules/@wordpress/icons/build-module/library/mobile.js");
/* harmony import */ var _wordpress_icons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @wordpress/icons */ "./node_modules/@wordpress/icons/build-module/library/tablet.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react/jsx-runtime */ "react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__);
/**
 * Device Preview Control component for switching between device preview modes.
 *
 * @package Athemes Starter Sites
 */




/**
 * Device Preview Control component.
 *
 * @param {Object}   props          Component props.
 * @param {string}   props.label    Label for the control.
 * @param {string}   props.value    Currently selected device ('desktop', 'tablet', or 'mobile').
 * @param {Function} props.onChange Callback when device selection changes.
 * @return {JSX.Element} Device Preview Control component.
 */

function DevicePreviewControl({
  label,
  value = 'desktop',
  onChange
}) {
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div", {
    className: "atss-device-preview-control atss-control atss-device-preview-control",
    children: [label && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("label", {
      className: "atss-control__label text-sm font-medium",
      children: label
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(_wordpress_components__WEBPACK_IMPORTED_MODULE_0__.__experimentalToggleGroupControl, {
      value: value,
      onChange: onChange,
      isBlock: true,
      __next40pxDefaultSize: true,
      __nextHasNoMarginBottom: true,
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_0__.__experimentalToggleGroupControlOptionIcon, {
        value: "desktop",
        icon: _wordpress_icons__WEBPACK_IMPORTED_MODULE_1__["default"],
        label: "Desktop"
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_0__.__experimentalToggleGroupControlOptionIcon, {
        value: "tablet",
        icon: _wordpress_icons__WEBPACK_IMPORTED_MODULE_3__["default"],
        label: "Tablet"
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_0__.__experimentalToggleGroupControlOptionIcon, {
        value: "mobile",
        icon: _wordpress_icons__WEBPACK_IMPORTED_MODULE_2__["default"],
        label: "Mobile"
      })]
    })]
  });
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DevicePreviewControl);

/***/ }),

/***/ "./v2/onboarding/src/components/Controls/MediaUploadControl.js":
/*!*********************************************************************!*\
  !*** ./v2/onboarding/src/components/Controls/MediaUploadControl.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/i18n */ "@wordpress/i18n");
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/components */ "@wordpress/components");
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_components__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _wordpress_icons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @wordpress/icons */ "./node_modules/@wordpress/icons/build-module/library/trash.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! prop-types */ "./node_modules/prop-types/index.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react/jsx-runtime */ "react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__);
/**
 * Media Upload Control component.
 *
 * @package Athemes Starter Sites
 */






/**
 * MediaUploadControl component for uploading images via WordPress media library.
 *
 * @param {Object}   props             Component props.
 * @param {string}   props.label       Label for the control.
 * @param {string}   props.value       Current image URL.
 * @param {number}   props.id          Current image ID.
 * @param {Function} props.onChange    Callback when image is selected/changed.
 * @param {Function} props.onRemove    Callback when image is removed.
 * @param {string}   props.buttonText  Text for the upload button.
 * @param {string}   props.allowedTypes Allowed media types (default: 'image').
 * @return {JSX.Element} MediaUploadControl component.
 */

function MediaUploadControl({
  label = (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)('Upload Image', 'athemes-starter-sites'),
  value = '',
  id = 0,
  onChange,
  onRemove,
  buttonText = (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)('Select Image', 'athemes-starter-sites'),
  allowedTypes = 'image'
}) {
  /**
   * Open WordPress media library.
   */
  const openMediaLibrary = () => {
    // Check if wp.media is available
    if (!window.wp || !window.wp.media) {
      console.error('WordPress media library is not available');
      return;
    }

    // Create media frame
    const frame = window.wp.media({
      frame: 'select',
      title: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)('Select or Upload Image', 'athemes-starter-sites'),
      button: {
        text: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)('Select', 'athemes-starter-sites')
      },
      multiple: false,
      library: {
        type: allowedTypes
      }
    });

    // When an image is selected, run callback
    frame.on('select', () => {
      const attachment = frame.state().get('selection').first().toJSON();
      if (onChange) {
        onChange({
          url: attachment.url,
          id: attachment.id,
          alt: attachment.alt || '',
          width: attachment.width || 0,
          height: attachment.height || 0
        });
      }
    });

    // Open the modal
    frame.open();
  };

  /**
   * Handle media removal.
   */
  const handleRemove = () => {
    if (onRemove) {
      onRemove();
    } else if (onChange) {
      onChange({
        url: '',
        id: 0,
        alt: '',
        width: 0,
        height: 0
      });
    }
  };
  const filename = value ? value.split('/').pop() : '';
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div", {
    className: "atss-control atss-media-upload-control",
    children: [label && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("label", {
      className: "atss-control__label text-sm font-medium",
      children: label
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div", {
      className: "atss-media-upload-control__content",
      children: !value ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div", {
        className: "atss-media-upload-control__buttons flex gap-xs flex-col justify-center",
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_1__.Button, {
          onClick: openMediaLibrary,
          variant: "secondary",
          className: "atss-media-upload-control__button w100 text-sm font-medium justify-center",
          children: buttonText
        })
      }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div", {
        className: "atss-media-upload-control__selected",
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div", {
          className: "atss-media-upload-control__file-info",
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div", {
            className: "atss-media-upload-control__thumbnail",
            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("img", {
              src: value,
              alt: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)('Preview', 'athemes-starter-sites')
            })
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("span", {
            className: "atss-media-upload-control__filename",
            children: filename
          })]
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div", {
          className: "atss-media-upload-control__actions",
          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_1__.Button, {
            onClick: openMediaLibrary,
            variant: "link",
            className: "atss-media-upload-control__button atss-media-upload-control__button--change",
            children: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)('Change', 'athemes-starter-sites')
          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_1__.Button, {
            onClick: handleRemove,
            variant: "link",
            isDestructive: true,
            className: "atss-media-upload-control__button atss-media-upload-control__button--remove",
            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_1__.Icon, {
              icon: _wordpress_icons__WEBPACK_IMPORTED_MODULE_2__["default"],
              size: 12
            })
          })]
        })]
      })
    })]
  });
}
MediaUploadControl.propTypes = {
  label: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().string),
  value: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().string),
  id: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().number),
  onChange: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().func).isRequired,
  onRemove: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().func),
  buttonText: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().string),
  allowedTypes: (prop_types__WEBPACK_IMPORTED_MODULE_3___default().string)
};
MediaUploadControl.defaultProps = {
  label: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)('Upload Image', 'athemes-starter-sites'),
  value: '',
  id: 0,
  buttonText: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)('Select Image', 'athemes-starter-sites'),
  allowedTypes: 'image'
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MediaUploadControl);

/***/ }),

/***/ "./v2/onboarding/src/components/Controls/TypographyControl.js":
/*!********************************************************************!*\
  !*** ./v2/onboarding/src/components/Controls/TypographyControl.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/element */ "@wordpress/element");
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/i18n */ "@wordpress/i18n");
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @wordpress/components */ "@wordpress/components");
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _wordpress_icons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @wordpress/icons */ "./node_modules/@wordpress/icons/build-module/library/rotate-left.js");
/* harmony import */ var _utils_preview_bridge__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/preview-bridge */ "./v2/onboarding/src/utils/preview-bridge.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react/jsx-runtime */ "react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__);
/**
 * Typography Control component.
 *
 * @package Athemes Starter Sites
 */







/**
 * Typography Control component.
 *
 * @param {Object}   props               Component props.
 * @param {string}   props.label         Label for the control.
 * @param {Array}    props.typographyPairs Array of typography pair objects.
 * @param {string}   props.value         Currently selected typography pair ID.
 * @param {Function} props.onChange      Callback when selection changes.
 * @return {JSX.Element} TypographyControl component.
 */

function TypographyControl({
  label,
  typographyPairs = [],
  value,
  onChange
}) {
  const linkRef = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);
  const selectedPair = typographyPairs.find(pair => pair.id === value);
  const fontNames = selectedPair?.label || (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('Default', 'athemes-starter-sites');

  /**
   * Load Google Fonts when component mounts.
   */
  (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    // Combine all Google Fonts URLs into a single request
    const fontFamilies = typographyPairs.filter(pair => pair.googleFontsUrl) // Skip pairs without Google Fonts URLs (e.g., system fonts)
    .map(pair => {
      // Extract font families and weights from the URL
      const url = new URL(pair.googleFontsUrl);
      return url.searchParams.get('family');
    }).filter(Boolean);

    // Only create link if there are Google Fonts to load
    if (fontFamilies.length > 0) {
      const link = document.createElement('link');
      link.rel = 'stylesheet';
      link.id = 'atss-typography-control-fonts';

      // Create combined Google Fonts URL
      const combinedUrl = `https://fonts.googleapis.com/css2?${fontFamilies.map(f => `family=${f}`).join('&')}&display=swap`;
      link.href = combinedUrl;

      // Append to head
      document.head.appendChild(link);
      linkRef.current = link;
    }

    // Cleanup on unmount
    return () => {
      if (linkRef.current && linkRef.current.parentNode) {
        linkRef.current.parentNode.removeChild(linkRef.current);
      }
    };
  }, [typographyPairs]);

  /**
   * Handle typography pair selection.
   *
   * @param {string} pairId The ID of the selected typography pair.
   */
  const handleSelect = pairId => {
    if (onChange) {
      onChange(pairId);
    }
  };

  /**
   * Handle reset action.
   */
  const handleReset = () => {
    if (onChange) {
      onChange('');
    }
    // Reset typography in the preview iframe
    _utils_preview_bridge__WEBPACK_IMPORTED_MODULE_4__["default"].resetTypography();
  };
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div", {
    className: "atss-control atss-typography-control",
    children: [label && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div", {
      className: "atss-control__label-wrapper flex items-center",
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("label", {
        className: "atss-control__label text-sm font-medium",
        children: [label, ": ", /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("span", {
          className: "atss-typography-control__font-names",
          children: fontNames
        })]
      }), value && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("button", {
        type: "button",
        className: "atss-control__reset-button",
        onClick: handleReset,
        "aria-label": (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('Reset selection', 'athemes-starter-sites'),
        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.Icon, {
          icon: _wordpress_icons__WEBPACK_IMPORTED_MODULE_3__["default"]
        })
      })]
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div", {
      className: "atss-typography-control__grid",
      children: typographyPairs.map(pair => {
        const isSelected = value === pair.id;
        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("button", {
          type: "button",
          className: `atss-typography-control__option ${isSelected ? 'atss-typography-control__option--selected' : ''}`,
          onClick: () => handleSelect(pair.id),
          "aria-label": pair.label || pair.name,
          "aria-pressed": isSelected,
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div", {
            className: "atss-typography-control__preview",
            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("span", {
              style: {
                fontFamily: pair.headingFont.family,
                fontWeight: 500,
                fontSize: '22px'
              },
              children: "A"
            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("span", {
              style: {
                fontFamily: pair.bodyFont.family,
                fontWeight: 400,
                fontSize: '22px'
              },
              children: "g"
            })]
          })
        }, pair.id);
      })
    })]
  });
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TypographyControl);

/***/ }),

/***/ "./v2/onboarding/src/components/Steps/Customize.js":
/*!*********************************************************!*\
  !*** ./v2/onboarding/src/components/Steps/Customize.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/element */ "@wordpress/element");
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/i18n */ "@wordpress/i18n");
/* harmony import */ var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @wordpress/components */ "@wordpress/components");
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Layout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Layout */ "./v2/onboarding/src/components/Layout/index.js");
/* harmony import */ var _context_WizardContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../context/WizardContext */ "./v2/onboarding/src/context/WizardContext.js");
/* harmony import */ var _data_starter_sites__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../data/starter-sites */ "./v2/onboarding/src/data/starter-sites.js");
/* harmony import */ var _data_color_schemes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../data/color-schemes */ "./v2/onboarding/src/data/color-schemes.js");
/* harmony import */ var _data_typography_pairs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../data/typography-pairs */ "./v2/onboarding/src/data/typography-pairs.js");
/* harmony import */ var _Controls_MediaUploadControl__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../Controls/MediaUploadControl */ "./v2/onboarding/src/components/Controls/MediaUploadControl.js");
/* harmony import */ var _Controls_CustomColorsControl__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../Controls/CustomColorsControl */ "./v2/onboarding/src/components/Controls/CustomColorsControl.js");
/* harmony import */ var _Controls_TypographyControl__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../Controls/TypographyControl */ "./v2/onboarding/src/components/Controls/TypographyControl.js");
/* harmony import */ var _Controls_DevicePreviewControl__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../Controls/DevicePreviewControl */ "./v2/onboarding/src/components/Controls/DevicePreviewControl.js");
/* harmony import */ var _Controls_CustomizeUpsell__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../Controls/CustomizeUpsell */ "./v2/onboarding/src/components/Controls/CustomizeUpsell.js");
/* harmony import */ var _utils_preload_helpers__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../utils/preload-helpers */ "./v2/onboarding/src/utils/preload-helpers.js");
/* harmony import */ var _utils_api__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../utils/api */ "./v2/onboarding/src/utils/api.js");
/* harmony import */ var _utils_use_preview_sync__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../utils/use-preview-sync */ "./v2/onboarding/src/utils/use-preview-sync.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! react/jsx-runtime */ "react/jsx-runtime");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__);
/**
 * Customize step component.
 *
 * @package Athemes Starter Sites
 */


















/**
 * Customize step component.
 *
 * @param {Object}   props                  Component props.
 * @param {Function} props.onBack           Callback to go to previous step.
 * @param {Function} props.onContinue       Callback to proceed to next step.
 * @param {boolean}  props.navigationLoading Whether navigation is in loading state.
 * @param {string}   props.navigationError   Navigation error message.
 * @return {JSX.Element} Customize component.
 */

function Customize({
  onBack,
  onContinue,
  navigationLoading,
  navigationError
}) {
  const {
    wizardData,
    prefetchedPages,
    setPrefetchedPages,
    siteTitle,
    setSiteTitle,
    builder
  } = (0,_context_WizardContext__WEBPACK_IMPORTED_MODULE_4__.useWizard)();
  const iframeRef = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);
  const [isIframeLoading, setIsIframeLoading] = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(true);

  // Get existing data from context if available
  const customizeData = wizardData['customize'] || {};
  const designData = wizardData['design'] || {};
  const [siteLogo, setSiteLogo] = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(customizeData.siteLogo || {
    url: '',
    id: 0
  });
  const [logoHeight, setLogoHeight] = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(customizeData.logoHeight ?? 80);
  const [showSiteTitle, setShowSiteTitle] = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(customizeData.showSiteTitle ?? true);
  const [selectedColorScheme, setSelectedColorScheme] = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(customizeData.selectedColorScheme || '');
  const [customColors, setCustomColors] = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(customizeData.customColors || {});
  const [customPrimaryColor, setCustomPrimaryColor] = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(customizeData.customPrimaryColor || '');
  const [selectedTypographyPair, setSelectedTypographyPair] = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(customizeData.selectedTypographyPair || '');
  const [previewDevice, setPreviewDevice] = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(customizeData.previewDevice || 'desktop');
  const [cleanInstall, setCleanInstall] = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(customizeData.cleanInstall || false);

  // Get the selected site ID from the Design step
  const selectedSiteId = designData.selectedSiteId;

  // Get theme name, selected site, color schemes, and typography pairs
  const themeName = (0,_data_starter_sites__WEBPACK_IMPORTED_MODULE_5__.getThemeName)();
  const selectedSite = (0,_data_starter_sites__WEBPACK_IMPORTED_MODULE_5__.getStarterSiteById)(selectedSiteId);
  const colorSchemes = (0,_data_color_schemes__WEBPACK_IMPORTED_MODULE_6__.getColorSchemesForSite)(selectedSite, themeName);
  const typographyPairs = (0,_data_typography_pairs__WEBPACK_IMPORTED_MODULE_7__.getTypographyPairsForSite)(selectedSite, themeName);

  // Check if there's an existing starter site installed
  const hasExistingStarter = window.atssOnboarding?.currentStarter && window.atssOnboarding.currentStarter !== '';

  // Check if the selected site is a Pro template
  // The 'type' property is set to 'pro' or 'free' in the starter sites data
  const isProTemplate = selectedSite?.type === 'pro';

  // Initialize preview bridge
  (0,_utils_use_preview_sync__WEBPACK_IMPORTED_MODULE_15__.usePreviewBridgeInit)(iframeRef);

  // Sync data with preview
  (0,_utils_use_preview_sync__WEBPACK_IMPORTED_MODULE_15__.useColorPreviewSync)({
    selectedColorScheme,
    colorSchemes,
    customColors
  });

  // When a predefined color scheme is selected, populate customColors with its colors
  // so they can be applied via apply_color_customizations in PHP
  // When switching to custom, clear customColors so they can be regenerated from primary color
  (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    if (selectedColorScheme === 'custom') {
      // Clear customColors when switching to custom mode
      // CustomColorsControl will regenerate them from the primary color
      setCustomColors({});
    } else if (selectedColorScheme && colorSchemes.length > 0) {
      const scheme = colorSchemes.find(s => s.id === selectedColorScheme);
      if (scheme && scheme.colors) {
        setCustomColors(scheme.colors);
      }
    }
  }, [selectedColorScheme, colorSchemes]);
  (0,_utils_use_preview_sync__WEBPACK_IMPORTED_MODULE_15__.useLogoPreviewSync)(siteLogo, logoHeight);
  (0,_utils_use_preview_sync__WEBPACK_IMPORTED_MODULE_15__.useLogoHeightPreviewSync)(logoHeight);
  (0,_utils_use_preview_sync__WEBPACK_IMPORTED_MODULE_15__.useSiteTitlePreviewSync)(siteTitle, showSiteTitle);
  (0,_utils_use_preview_sync__WEBPACK_IMPORTED_MODULE_15__.useTypographyPreviewSync)(selectedTypographyPair, typographyPairs);

  // Get the site data and preview URL
  const previewUrl = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {
    if (selectedSiteId) {
      const site = (0,_data_starter_sites__WEBPACK_IMPORTED_MODULE_5__.getStarterSiteById)(selectedSiteId);
      if (site && site.preview) {
        let url = site.preview;

        // If builder is Gutenberg, append -gb to the URL slug
        if (builder === 'gutenberg') {
          // Clean up double dashes in URL
          if (selectedSiteId !== 'resume') {
            url = url.replace(/--/g, '-');
          }
          // Transform: https://demo.athemes.com/sydney-main/  https://demo.athemes.com/sydney-main-gb/
          url = url.replace(/\/([^\/\?]+)(\/)?(\?.*)?$/, '/$1-gb$2$3');
          if (selectedSiteId === 'cafe') {
            // Special case for Cafe template
            url = 'https://demo.athemes.com/sp-cafe-gb/';
          }
          if (selectedSiteId === 'author') {
            // Special case for Author template
            url = 'https://demo.athemes.com/sp-author-gb/';
          }
        }
        return url;
      }
    }
    // Fallback to default preview URL
    return 'https://athemes.com/';
  }, [selectedSiteId, builder]);

  // Add preconnect hints for faster iframe loading
  (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    (0,_utils_preload_helpers__WEBPACK_IMPORTED_MODULE_13__.addPreconnectHints)(previewUrl);
  }, [previewUrl]);

  // Handle logo change
  const handleLogoChange = newLogo => {
    setSiteLogo(newLogo);

    // If a logo is set, deactivate site title by default (per requirements)
    if (newLogo.url) {
      setShowSiteTitle(false);
    } else {
      setShowSiteTitle(true);
    }
  };

  // Handle iframe load - also prefetch pages for the next step
  const handleIframeLoad = async () => {
    setIsIframeLoading(false);

    // Prefetch pages for the Pages step if not already fetched for this site
    // Note: prefetchedPages are cleared when design changes (in Design.js)
    if (!prefetchedPages && selectedSiteId) {
      try {
        const pagesData = await (0,_utils_api__WEBPACK_IMPORTED_MODULE_14__.getDemoPages)(selectedSiteId, builder);

        // Sort pages to ensure homepage appears first
        const sortedPages = [...pagesData].sort((a, b) => {
          const aIsHome = /^(home|my front page)$/i.test(a.title.trim());
          const bIsHome = /^(home|my front page)$/i.test(b.title.trim());
          if (aIsHome && !bIsHome) {
            return -1;
          }
          if (!aIsHome && bIsHome) {
            return 1;
          }
          return 0;
        });

        // Filter out Sample Page and Test pages
        const filteredPages = sortedPages.filter(page => {
          const title = page.title.trim();
          return !/^(sample page|test)$/i.test(title);
        });

        // Store in context for Pages step
        setPrefetchedPages(filteredPages);

        // Add preconnect hints for faster iframe loading
        (0,_utils_preload_helpers__WEBPACK_IMPORTED_MODULE_13__.addPagePreconnectHints)(filteredPages);
      } catch (err) {
        // Silently fail - Pages step will fetch if needed
        // eslint-disable-next-line no-console
        console.log('Prefetch pages failed (will retry on Pages step):', err);
      }
    }
  };

  // Handle continue - save customize data to wizard context
  const handleContinue = () => {
    // Get the selected typography pair to extract font names
    const selectedPair = typographyPairs.find(pair => pair.id === selectedTypographyPair);
    onContinue({
      siteLogo,
      logoHeight,
      showSiteTitle,
      selectedColorScheme,
      customColors,
      customPrimaryColor,
      selectedTypographyPair,
      headingFont: selectedPair?.headingFont?.family || '',
      bodyFont: selectedPair?.bodyFont?.family || '',
      cleanInstall
    });
  };
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)("div", {
    className: "atss-onboarding-wizard__step-wrapper flex",
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)("div", {
      className: "atss-onboarding-wizard__step atss-onboarding-wizard__step--customize",
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)("main", {
        className: "atss-onboarding-wizard__step-body",
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Controls_MediaUploadControl__WEBPACK_IMPORTED_MODULE_8__["default"], {
          label: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('Site Logo', 'athemes-starter-sites'),
          value: siteLogo.url,
          id: siteLogo.id,
          onChange: handleLogoChange,
          buttonText: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('Upload Logo', 'athemes-starter-sites')
        }), siteLogo.url && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.RangeControl, {
          label: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('Logo Height', 'athemes-starter-sites'),
          value: logoHeight,
          onChange: setLogoHeight,
          min: 30,
          max: 125,
          className: "atss-control"
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.TextControl, {
          label: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('Site Title', 'athemes-starter-sites'),
          className: "atss-control atss-site-title-control",
          value: siteTitle,
          onChange: setSiteTitle,
          __next40pxDefaultSize: true,
          __nextHasNoMarginBottom: true
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.ToggleControl, {
          label: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('Show site title', 'athemes-starter-sites'),
          className: "atss-control",
          checked: showSiteTitle,
          onChange: setShowSiteTitle,
          __nextHasNoMarginBottom: true
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Controls_CustomColorsControl__WEBPACK_IMPORTED_MODULE_9__["default"], {
          label: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('Color Scheme', 'athemes-starter-sites'),
          colorSchemes: colorSchemes,
          value: selectedColorScheme,
          onChange: setSelectedColorScheme,
          onCustomColors: setCustomColors,
          customColors: customColors,
          customPrimaryColor: customPrimaryColor,
          onPrimaryColorChange: setCustomPrimaryColor,
          themeName: themeName
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Controls_TypographyControl__WEBPACK_IMPORTED_MODULE_10__["default"], {
          label: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('Fonts', 'athemes-starter-sites'),
          typographyPairs: typographyPairs,
          value: selectedTypographyPair,
          onChange: setSelectedTypographyPair
        }), hasExistingStarter && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.ToggleControl, {
          label: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('Clean Install', 'athemes-starter-sites'),
          className: "atss-control",
          checked: cleanInstall,
          onChange: setCleanInstall,
          help: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('This option will remove the previous imported content and will perform a fresh and clean install.', 'athemes-starter-sites'),
          __nextHasNoMarginBottom: true
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Controls_DevicePreviewControl__WEBPACK_IMPORTED_MODULE_11__["default"], {
          label: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('Preview', 'athemes-starter-sites'),
          value: previewDevice,
          onChange: setPreviewDevice
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Controls_CustomizeUpsell__WEBPACK_IMPORTED_MODULE_12__["default"], {
          isVisible: isProTemplate,
          upgradeUrl: window.atssOnboarding?.upgradeUrl || undefined
        })]
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Layout__WEBPACK_IMPORTED_MODULE_3__.Footer, {
        showBack: true,
        showSkip: false,
        continueText: (0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('Continue', 'athemes-starter-sites'),
        onBack: onBack,
        onContinue: handleContinue,
        continueDisabled: isProTemplate,
        continueLoading: navigationLoading,
        continueError: navigationError
      })]
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("div", {
      className: "atss-onboarding-wizard__preview",
      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)("div", {
        className: `atss-onboarding-wizard__preview-inner atss-onboarding-wizard__preview-iframe--${previewDevice}`,
        children: [isIframeLoading && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("div", {
          className: "atss-onboarding-wizard__preview-loading",
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_Layout__WEBPACK_IMPORTED_MODULE_3__.Spinner, {})
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("iframe", {
          ref: iframeRef,
          id: "demo-preview",
          src: `${previewUrl}${previewUrl.includes('?') ? '&' : '?'}atss_preview=1`,
          title: "Preview",
          onLoad: handleIframeLoad,
          style: {
            opacity: isIframeLoading ? 0 : 1
          },
          className: `atss-onboarding-wizard__preview-iframe`
        })]
      })
    })]
  });
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Customize);

/***/ }),

/***/ "./v2/onboarding/src/data/color-schemes.js":
/*!*************************************************!*\
  !*** ./v2/onboarding/src/data/color-schemes.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getColorSchemeById: () => (/* binding */ getColorSchemeById),
/* harmony export */   getColorSchemesForSite: () => (/* binding */ getColorSchemesForSite),
/* harmony export */   themeColorSchemes: () => (/* binding */ themeColorSchemes)
/* harmony export */ });
/**
 * Color schemes data for themes.
 *
 * @package aThemes Starter Sites
 */

/**
 * Theme-level default color schemes.
 * Each color scheme contains CSS custom properties and their values.
 */
const themeColorSchemes = {
  sydney: [{
    id: 'default',
    name: 'Default',
    colors: {
      '--sydney-global-color-1': '#d65050',
      '--sydney-global-color-2': '#b73d3d',
      '--sydney-global-color-3': '#233452',
      '--sydney-global-color-4': '#00102E',
      '--sydney-global-color-5': '#6d7685',
      '--sydney-global-color-6': '#00102E',
      '--sydney-global-color-7': '#F4F5F7',
      '--sydney-global-color-8': '#dbdbdb',
      '--sydney-global-color-9': '#ffffff'
    }
  }, {
    id: 'vibrant-blue',
    name: 'Vibrant Blue',
    colors: {
      '--sydney-global-color-1': '#2563eb',
      '--sydney-global-color-2': '#1d4ed8',
      '--sydney-global-color-3': '#334155',
      '--sydney-global-color-4': '#0f172a',
      '--sydney-global-color-5': '#64748b',
      '--sydney-global-color-6': '#1e293b',
      '--sydney-global-color-7': '#f8fafc',
      '--sydney-global-color-8': '#e2e8f0',
      '--sydney-global-color-9': '#ffffff'
    }
  }, {
    id: 'sunset-warmth',
    name: 'Sunset Warmth',
    colors: {
      '--sydney-global-color-1': '#f97316',
      '--sydney-global-color-2': '#ea580c',
      '--sydney-global-color-3': '#44403c',
      '--sydney-global-color-4': '#1c1917',
      '--sydney-global-color-5': '#78716c',
      '--sydney-global-color-6': '#292524',
      '--sydney-global-color-7': '#fafaf9',
      '--sydney-global-color-8': '#e7e5e4',
      '--sydney-global-color-9': '#ffffff'
    }
  }, {
    id: 'forest-green',
    name: 'Forest Green',
    colors: {
      '--sydney-global-color-1': '#16a34a',
      '--sydney-global-color-2': '#15803d',
      '--sydney-global-color-3': '#3f3f46',
      '--sydney-global-color-4': '#18181b',
      '--sydney-global-color-5': '#71717a',
      '--sydney-global-color-6': '#27272a',
      '--sydney-global-color-7': '#fafafa',
      '--sydney-global-color-8': '#e4e4e7',
      '--sydney-global-color-9': '#ffffff'
    }
  }, {
    id: 'royal-purple',
    name: 'Royal Purple',
    colors: {
      '--sydney-global-color-1': '#9333ea',
      '--sydney-global-color-2': '#7e22ce',
      '--sydney-global-color-3': '#3f3f46',
      '--sydney-global-color-4': '#18181b',
      '--sydney-global-color-5': '#71717a',
      '--sydney-global-color-6': '#27272a',
      '--sydney-global-color-7': '#fafafa',
      '--sydney-global-color-8': '#e4e4e7',
      '--sydney-global-color-9': '#ffffff'
    }
  }, {
    id: 'crimson-red',
    name: 'Crimson Red',
    colors: {
      '--sydney-global-color-1': '#dc2626',
      '--sydney-global-color-2': '#b91c1c',
      '--sydney-global-color-3': '#374151',
      '--sydney-global-color-4': '#111827',
      '--sydney-global-color-5': '#6b7280',
      '--sydney-global-color-6': '#1f2937',
      '--sydney-global-color-7': '#f9fafb',
      '--sydney-global-color-8': '#e5e7eb',
      '--sydney-global-color-9': '#ffffff'
    }
  }, {
    id: 'teal-aqua',
    name: 'Teal Aqua',
    colors: {
      '--sydney-global-color-1': '#14b8a6',
      '--sydney-global-color-2': '#0d9488',
      '--sydney-global-color-3': '#334155',
      '--sydney-global-color-4': '#0f172a',
      '--sydney-global-color-5': '#64748b',
      '--sydney-global-color-6': '#1e293b',
      '--sydney-global-color-7': '#f8fafc',
      '--sydney-global-color-8': '#e2e8f0',
      '--sydney-global-color-9': '#ffffff'
    }
  }],
  botiga: [{
    id: 'default',
    name: 'Default',
    colors: {
      '--botiga-global-color-1': '#d65050',
      '--botiga-global-color-2': '#b73d3d',
      '--botiga-global-color-3': '#233452',
      '--botiga-global-color-4': '#00102E',
      '--botiga-global-color-5': '#6d7685',
      '--botiga-global-color-6': '#00102E',
      '--botiga-global-color-7': '#F4F5F7',
      '--botiga-global-color-8': '#dbdbdb',
      '--botiga-global-color-9': '#ffffff'
    }
  }, {
    id: 'vibrant-blue',
    name: 'Vibrant Blue',
    colors: {
      '--botiga-global-color-1': '#2563eb',
      '--botiga-global-color-2': '#1d4ed8',
      '--botiga-global-color-3': '#334155',
      '--botiga-global-color-4': '#0f172a',
      '--botiga-global-color-5': '#64748b',
      '--botiga-global-color-6': '#1e293b',
      '--botiga-global-color-7': '#f8fafc',
      '--botiga-global-color-8': '#e2e8f0',
      '--botiga-global-color-9': '#ffffff'
    }
  }, {
    id: 'sunset-warmth',
    name: 'Sunset Warmth',
    colors: {
      '--botiga-global-color-1': '#f97316',
      '--botiga-global-color-2': '#ea580c',
      '--botiga-global-color-3': '#44403c',
      '--botiga-global-color-4': '#1c1917',
      '--botiga-global-color-5': '#78716c',
      '--botiga-global-color-6': '#292524',
      '--botiga-global-color-7': '#fafaf9',
      '--botiga-global-color-8': '#e7e5e4',
      '--botiga-global-color-9': '#ffffff'
    }
  }, {
    id: 'forest-green',
    name: 'Forest Green',
    colors: {
      '--botiga-global-color-1': '#16a34a',
      '--botiga-global-color-2': '#15803d',
      '--botiga-global-color-3': '#3f3f46',
      '--botiga-global-color-4': '#18181b',
      '--botiga-global-color-5': '#71717a',
      '--botiga-global-color-6': '#27272a',
      '--botiga-global-color-7': '#fafafa',
      '--botiga-global-color-8': '#e4e4e7',
      '--botiga-global-color-9': '#ffffff'
    }
  }, {
    id: 'royal-purple',
    name: 'Royal Purple',
    colors: {
      '--botiga-global-color-1': '#9333ea',
      '--botiga-global-color-2': '#7e22ce',
      '--botiga-global-color-3': '#3f3f46',
      '--botiga-global-color-4': '#18181b',
      '--botiga-global-color-5': '#71717a',
      '--botiga-global-color-6': '#27272a',
      '--botiga-global-color-7': '#fafafa',
      '--botiga-global-color-8': '#e4e4e7',
      '--botiga-global-color-9': '#ffffff'
    }
  }, {
    id: 'crimson-red',
    name: 'Crimson Red',
    colors: {
      '--botiga-global-color-1': '#dc2626',
      '--botiga-global-color-2': '#b91c1c',
      '--botiga-global-color-3': '#374151',
      '--botiga-global-color-4': '#111827',
      '--botiga-global-color-5': '#6b7280',
      '--botiga-global-color-6': '#1f2937',
      '--botiga-global-color-7': '#f9fafb',
      '--botiga-global-color-8': '#e5e7eb',
      '--botiga-global-color-9': '#ffffff'
    }
  }, {
    id: 'teal-aqua',
    name: 'Teal Aqua',
    colors: {
      '--botiga-global-color-1': '#14b8a6',
      '--botiga-global-color-2': '#0d9488',
      '--botiga-global-color-3': '#334155',
      '--botiga-global-color-4': '#0f172a',
      '--botiga-global-color-5': '#64748b',
      '--botiga-global-color-6': '#1e293b',
      '--botiga-global-color-7': '#f8fafc',
      '--botiga-global-color-8': '#e2e8f0',
      '--botiga-global-color-9': '#ffffff'
    }
  }]
};

/**
 * Get color schemes for a starter site.
 *
 * @param {Object|null} siteData  The starter site data object.
 * @param {string}      themeName The theme name (sydney, botiga, etc.).
 * @return {Array} Array of color scheme objects.
 */
const getColorSchemesForSite = (siteData, themeName) => {
  // 1. If site has custom color schemes, return those
  if (siteData?.colorSchemes && 0 < siteData.colorSchemes.length) {
    return siteData.colorSchemes;
  }

  // 2. Otherwise, return theme defaults using themeName from atssOnboarding
  return themeColorSchemes[themeName] || themeColorSchemes.sydney;
};

/**
 * Get a single color scheme by ID from a list of schemes.
 *
 * @param {Array}  schemes  Array of color scheme objects.
 * @param {string} schemeId The ID of the color scheme to find.
 * @return {Object|null} The color scheme object or null if not found.
 */
const getColorSchemeById = (schemes, schemeId) => {
  return schemes.find(scheme => scheme.id === schemeId) || null;
};

/***/ }),

/***/ "./v2/onboarding/src/data/starter-sites.js":
/*!*************************************************!*\
  !*** ./v2/onboarding/src/data/starter-sites.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getOnboardingSettings: () => (/* binding */ getOnboardingSettings),
/* harmony export */   getRawDemos: () => (/* binding */ getRawDemos),
/* harmony export */   getStarterSiteById: () => (/* binding */ getStarterSiteById),
/* harmony export */   getStarterSites: () => (/* binding */ getStarterSites),
/* harmony export */   getThemeName: () => (/* binding */ getThemeName)
/* harmony export */ });
/**
 * Starter sites data getter.
 *
 * @package Athemes Starter Sites
 */

/**
 * Get the raw demos object from the localized data.
 *
 * @return {Object} The demos object.
 */
const getRawDemos = () => {
  return window.atssOnboarding?.demos || {};
};

/**
 * Get all available starter sites as an array.
 *
 * @return {Array} Array of demo objects.
 */
const getStarterSites = () => {
  const demos = getRawDemos();
  return Object.entries(demos).map(([id, data]) => ({
    id,
    ...data
  }));
};

/**
 * Get a single starter site by its ID.
 *
 * @param {string} id The demo ID.
 * @return {Object|null} The demo object or null if not found.
 */
const getStarterSiteById = id => {
  const demos = getRawDemos();
  return demos[id] ? {
    id,
    ...demos[id]
  } : null;
};

/**
 * Get the onboarding settings.
 *
 * @return {Object} The settings object.
 */
const getOnboardingSettings = () => {
  return window.atssOnboarding?.settings || {};
};

/**
 * Get the current theme name.
 *
 * @return {string} The theme name (e.g., 'sydney', 'botiga').
 */
const getThemeName = () => {
  return window.atssOnboarding?.themeName || 'sydney';
};

/***/ }),

/***/ "./v2/onboarding/src/data/typography-pairs.js":
/*!****************************************************!*\
  !*** ./v2/onboarding/src/data/typography-pairs.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getTypographyPairById: () => (/* binding */ getTypographyPairById),
/* harmony export */   getTypographyPairsForSite: () => (/* binding */ getTypographyPairsForSite),
/* harmony export */   typographyPairs: () => (/* binding */ typographyPairs)
/* harmony export */ });
/**
 * Typography pairs data for themes.
 *
 * @package aThemes Starter Sites
 */

/**
 * Universal typography pairs that work across all themes.
 * Each pair contains heading and body font families.
 * Font weights are hardcoded in the component (500 for headings, 400 for body).
 */
const typographyPairs = [{
  id: 'system',
  name: 'System Default',
  label: 'System Default',
  headingFont: {
    family: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif'
  },
  bodyFont: {
    family: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif'
  },
  googleFontsUrl: '' // No Google Fonts needed for system fonts
}, {
  id: 'default',
  name: 'Default',
  label: 'Inter',
  headingFont: {
    family: 'Inter'
  },
  bodyFont: {
    family: 'Inter'
  },
  googleFontsUrl: 'https://fonts.googleapis.com/css2?family=Inter:wght@400;500&display=swap'
}, {
  id: 'classic-elegant',
  name: 'Classic Elegant',
  label: 'Playfair Display & Source Sans Pro',
  headingFont: {
    family: 'Playfair Display'
  },
  bodyFont: {
    family: 'Source Sans Pro'
  },
  googleFontsUrl: 'https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500&family=Source+Sans+Pro:wght@400&display=swap'
}, {
  id: 'modern-clean',
  name: 'Modern Clean',
  label: 'Poppins',
  headingFont: {
    family: 'Poppins'
  },
  bodyFont: {
    family: 'Poppins'
  },
  googleFontsUrl: 'https://fonts.googleapis.com/css2?family=Poppins:wght@400;500&display=swap'
}, {
  id: 'professional',
  name: 'Professional',
  label: 'Roboto Slab & Roboto',
  headingFont: {
    family: 'Roboto Slab'
  },
  bodyFont: {
    family: 'Roboto'
  },
  googleFontsUrl: 'https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@500&family=Roboto:wght@400&display=swap'
}, {
  id: 'creative-bold',
  name: 'Creative Bold',
  label: 'Montserrat & Open Sans',
  headingFont: {
    family: 'Montserrat'
  },
  bodyFont: {
    family: 'Open Sans'
  },
  googleFontsUrl: 'https://fonts.googleapis.com/css2?family=Montserrat:wght@500&family=Open+Sans:wght@400&display=swap'
}, {
  id: 'editorial',
  name: 'Editorial',
  label: 'Merriweather & Lato',
  headingFont: {
    family: 'Merriweather'
  },
  bodyFont: {
    family: 'Lato'
  },
  googleFontsUrl: 'https://fonts.googleapis.com/css2?family=Merriweather:wght@500&family=Lato:wght@400&display=swap'
}, {
  id: 'minimal-sans',
  name: 'Minimal Sans',
  label: 'Work Sans',
  headingFont: {
    family: 'Work Sans'
  },
  bodyFont: {
    family: 'Work Sans'
  },
  googleFontsUrl: 'https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500&display=swap'
}];

/**
 * Get typography pairs for a starter site.
 * Currently returns the same universal pairs for all sites.
 *
 * @param {Object|null} siteData  The starter site data object (unused for now).
 * @param {string}      themeName The theme name (unused for now).
 * @return {Array} Array of typography pair objects.
 */
const getTypographyPairsForSite = (siteData, themeName) => {
  // For now, return universal pairs for all themes
  // In the future, this could be extended to support site-specific or theme-specific pairs
  return typographyPairs;
};

/**
 * Get a single typography pair by ID from a list of pairs.
 *
 * @param {Array}  pairs  Array of typography pair objects.
 * @param {string} pairId The ID of the typography pair to find.
 * @return {Object|null} The typography pair object or null if not found.
 */
const getTypographyPairById = (pairs, pairId) => {
  return pairs.find(pair => pair.id === pairId) || null;
};

/***/ }),

/***/ "./v2/onboarding/src/utils/color-utils.js":
/*!************************************************!*\
  !*** ./v2/onboarding/src/utils/color-utils.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calculateContrastRatio: () => (/* binding */ calculateContrastRatio),
/* harmony export */   darken: () => (/* binding */ darken),
/* harmony export */   generateColorScheme: () => (/* binding */ generateColorScheme),
/* harmony export */   hexToHSL: () => (/* binding */ hexToHSL),
/* harmony export */   hslToHex: () => (/* binding */ hslToHex),
/* harmony export */   lighten: () => (/* binding */ lighten)
/* harmony export */ });
/**
 * Color utility functions for generating color schemes.
 *
 * @package Athemes Starter Sites
 */

/**
 * Convert hex color to HSL.
 *
 * @param {string} hex Hex color string (e.g., '#333333').
 * @return {Object} HSL object with h, s, l properties.
 */
function hexToHSL(hex) {
  // Remove the hash if present
  hex = hex.replace(/^#/, '');

  // Parse hex to RGB
  const r = parseInt(hex.substring(0, 2), 16) / 255;
  const g = parseInt(hex.substring(2, 4), 16) / 255;
  const b = parseInt(hex.substring(4, 6), 16) / 255;
  const max = Math.max(r, g, b);
  const min = Math.min(r, g, b);
  let h, s;
  const l = (max + min) / 2;
  if (max === min) {
    h = s = 0; // achromatic
  } else {
    const d = max - min;
    s = 0.5 < l ? d / (2 - max - min) : d / (max + min);
    switch (max) {
      case r:
        h = (g - b) / d + (g < b ? 6 : 0);
        break;
      case g:
        h = (b - r) / d + 2;
        break;
      case b:
        h = (r - g) / d + 4;
        break;
    }
    h /= 6;
  }
  return {
    h: Math.round(h * 360),
    s: Math.round(s * 100),
    l: Math.round(l * 100)
  };
}

/**
 * Convert HSL to hex color.
 *
 * @param {number} h Hue (0-360).
 * @param {number} s Saturation (0-100).
 * @param {number} l Lightness (0-100).
 * @return {string} Hex color string.
 */
function hslToHex(h, s, l) {
  h = h / 360;
  s = s / 100;
  l = l / 100;
  let r, g, b;
  if (0 === s) {
    r = g = b = l; // achromatic
  } else {
    const hue2rgb = (p, q, t) => {
      if (0 > t) {
        t += 1;
      }
      if (1 < t) {
        t -= 1;
      }
      if (t < 1 / 6) {
        return p + (q - p) * 6 * t;
      }
      if (t < 1 / 2) {
        return q;
      }
      if (t < 2 / 3) {
        return p + (q - p) * (2 / 3 - t) * 6;
      }
      return p;
    };
    const q = 0.5 > l ? l * (1 + s) : l + s - l * s;
    const p = 2 * l - q;
    r = hue2rgb(p, q, h + 1 / 3);
    g = hue2rgb(p, q, h);
    b = hue2rgb(p, q, h - 1 / 3);
  }
  const toHex = x => {
    const hex = Math.round(x * 255).toString(16);
    return 1 === hex.length ? '0' + hex : hex;
  };
  return '#' + toHex(r) + toHex(g) + toHex(b);
}

/**
 * Lighten a color by increasing its lightness.
 *
 * @param {string} hex    Hex color string.
 * @param {number} amount Amount to lighten (0-100).
 * @return {string} Lightened hex color.
 */
function lighten(hex, amount) {
  const hsl = hexToHSL(hex);
  hsl.l = Math.min(100, hsl.l + amount);
  return hslToHex(hsl.h, hsl.s, hsl.l);
}

/**
 * Darken a color by decreasing its lightness.
 *
 * @param {string} hex    Hex color string.
 * @param {number} amount Amount to darken (0-100).
 * @return {string} Darkened hex color.
 */
function darken(hex, amount) {
  const hsl = hexToHSL(hex);
  hsl.l = Math.max(0, hsl.l - amount);
  return hslToHex(hsl.h, hsl.s, hsl.l);
}

/**
 * Calculate relative luminance for contrast ratio.
 *
 * @param {string} hex Hex color string.
 * @return {number} Relative luminance.
 */
function getRelativeLuminance(hex) {
  hex = hex.replace(/^#/, '');
  const r = parseInt(hex.substring(0, 2), 16) / 255;
  const g = parseInt(hex.substring(2, 4), 16) / 255;
  const b = parseInt(hex.substring(4, 6), 16) / 255;
  const toLinear = c => {
    return 0.03928 >= c ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
  };
  const rLinear = toLinear(r);
  const gLinear = toLinear(g);
  const bLinear = toLinear(b);
  return 0.2126 * rLinear + 0.7152 * gLinear + 0.0722 * bLinear;
}

/**
 * Calculate contrast ratio between two colors.
 *
 * @param {string} color1 First hex color.
 * @param {string} color2 Second hex color.
 * @return {number} Contrast ratio.
 */
function calculateContrastRatio(color1, color2) {
  const lum1 = getRelativeLuminance(color1);
  const lum2 = getRelativeLuminance(color2);
  const lighter = Math.max(lum1, lum2);
  const darker = Math.min(lum1, lum2);
  return (lighter + 0.05) / (darker + 0.05);
}

/**
 * Generate a complete 9-color scheme from a primary color.
 *
 * @param {string} primaryColor Hex color for the primary color.
 * @param {string} themeName    Theme name (sydney, botiga, etc.) to generate proper CSS variable names.
 * @return {Object} Object containing colors array and contrast warnings.
 */
function generateColorScheme(primaryColor, themeName = 'sydney') {
  const hsl = hexToHSL(primaryColor);
  const primaryHue = hsl.h;
  const primaryLightness = hsl.l;

  // Generate the color values
  const colorValues = {
    1: primaryColor,
    // Primary Color - as-is
    2: 20 > primaryLightness ? lighten(primaryColor, 15) : darken(primaryColor, 10),
    // Hover Color
    3: hslToHex(primaryHue, 15, 20),
    // Body Text Color
    4: hslToHex(primaryHue, 20, 12),
    // General Headings Color
    5: hslToHex(primaryHue, 10, 55),
    // Smaller Text/Meta
    6: hslToHex(primaryHue, 20, 10),
    // Dark Backgrounds
    7: hslToHex(primaryHue, 20, 97),
    // Light Backgrounds
    8: hslToHex(primaryHue, 12, 87),
    // Border Color
    9: '#ffffff' // Site Background
  };

  // Generate the 9 colors with proper CSS variable names for the theme
  // Ensure theme name is lowercase for CSS variables
  const themeSlug = themeName.toLowerCase();
  const colors = {};
  for (let i = 1; 9 >= i; i++) {
    colors[`--${themeSlug}-global-color-${i}`] = colorValues[i];
  }

  // Calculate contrast ratios and generate warnings
  const warnings = [];
  const backgroundColor = colorValues[9];

  // Check primary color contrast (color 1)
  const primaryContrast = calculateContrastRatio(colorValues[1], backgroundColor);
  if (4.5 > primaryContrast) {
    warnings.push({
      color: `--${themeSlug}-global-color-1`,
      message: 'Primary color may not have sufficient contrast on light backgrounds. Consider choosing a darker color.',
      ratio: primaryContrast.toFixed(2)
    });
  }

  // Check body text contrast (color 3)
  const bodyTextContrast = calculateContrastRatio(colorValues[3], backgroundColor);
  if (4.5 > bodyTextContrast) {
    warnings.push({
      color: `--${themeSlug}-global-color-3`,
      message: 'Body text color may not have sufficient contrast on light backgrounds. Consider choosing a darker primary color.',
      ratio: bodyTextContrast.toFixed(2)
    });
  }

  // Check headings contrast (color 4)
  const headingsContrast = calculateContrastRatio(colorValues[4], backgroundColor);
  if (4.5 > headingsContrast) {
    warnings.push({
      color: `--${themeSlug}-global-color-4`,
      message: 'Heading color may not have sufficient contrast on light backgrounds. Consider choosing a darker primary color.',
      ratio: headingsContrast.toFixed(2)
    });
  }
  return {
    colors,
    warnings
  };
}

/***/ }),

/***/ "./v2/onboarding/src/utils/config.js":
/*!*******************************************!*\
  !*** ./v2/onboarding/src/utils/config.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ACCOUNT_URL: () => (/* binding */ ACCOUNT_URL),
/* harmony export */   ATHEMES_BASE_URL: () => (/* binding */ ATHEMES_BASE_URL),
/* harmony export */   DEFAULT_UPGRADE_URL: () => (/* binding */ DEFAULT_UPGRADE_URL),
/* harmony export */   DOCUMENTATION_URL: () => (/* binding */ DOCUMENTATION_URL),
/* harmony export */   FACEBOOK_GROUP_URL: () => (/* binding */ FACEBOOK_GROUP_URL)
/* harmony export */ });
/**
 * Configuration constants for the onboarding wizard.
 *
 * @package Athemes Starter Sites
 */

/**
 * Base URL for Athemes website.
 *
 * @type {string}
 */
const ATHEMES_BASE_URL = 'https://athemes.com';

/**
 * Account dashboard URL.
 * This is the same for all products.
 *
 * @type {string}
 */
const ACCOUNT_URL = `${ATHEMES_BASE_URL}/account/`;

/**
 * Default upgrade URL.
 *
 * @type {string}
 */
const DEFAULT_UPGRADE_URL = `${ATHEMES_BASE_URL}/`;

/**
 * Documentation URL.
 * The theme name is passed as a parameter to the documentation URL.
 *
 * @type {string}
 */
const DOCUMENTATION_URL = `https://docs.athemes.com/documentation/${window.atssOnboarding?.themeName}`;

/**
 * Facebook Group URL.
 *
 * @type {string}
 */
const FACEBOOK_GROUP_URL = 'https://www.facebook.com/groups/athemes/';

/***/ }),

/***/ "./v2/onboarding/src/utils/image-utils.js":
/*!************************************************!*\
  !*** ./v2/onboarding/src/utils/image-utils.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   convertLogoForPreview: () => (/* binding */ convertLogoForPreview),
/* harmony export */   imageUrlToDataUrl: () => (/* binding */ imageUrlToDataUrl),
/* harmony export */   isLocalUrl: () => (/* binding */ isLocalUrl)
/* harmony export */ });
/**
 * Image utilities - Handle image conversion for preview sync.
 *
 * @package Athemes Starter Sites
 */

/**
 * Check if a URL is from a local/development environment.
 *
 * @param {string} url The URL to check.
 * @return {boolean} True if the URL is local.
 */
const isLocalUrl = url => {
  if (!url) {
    return false;
  }
  try {
    const urlObj = new URL(url);
    const hostname = urlObj.hostname.toLowerCase();

    // Check for localhost
    if (hostname === 'localhost') {
      return true;
    }

    // Check for .local domains
    if (hostname.endsWith('.local')) {
      return true;
    }

    // Check for .test domains
    if (hostname.endsWith('.test')) {
      return true;
    }

    // Check for IP addresses (127.x.x.x, 192.168.x.x, 10.x.x.x, 172.16-31.x.x)
    const ipv4Regex = /^(\d{1,3}\.){3}\d{1,3}$/;
    if (ipv4Regex.test(hostname)) {
      const parts = hostname.split('.').map(Number);
      // 127.x.x.x (loopback)
      if (parts[0] === 127) {
        return true;
      }
      // 192.168.x.x (private)
      if (parts[0] === 192 && parts[1] === 168) {
        return true;
      }
      // 10.x.x.x (private)
      if (parts[0] === 10) {
        return true;
      }
      // 172.16.x.x - 172.31.x.x (private)
      if (parts[0] === 172 && parts[1] >= 16 && parts[1] <= 31) {
        return true;
      }
    }

    // Check for IPv6 localhost
    if (hostname === '::1' || hostname === '[::1]') {
      return true;
    }
    return false;
  } catch (e) {
    // If URL parsing fails, assume it's not local
    return false;
  }
};

/**
 * Convert an image URL to a data URL.
 *
 * @param {string} imageUrl The image URL to convert.
 * @return {Promise<string>} Promise that resolves to a data URL.
 */
const imageUrlToDataUrl = imageUrl => {
  return new Promise((resolve, reject) => {
    const img = new Image();

    // Set crossOrigin to anonymous to allow CORS
    img.crossOrigin = 'anonymous';
    img.onload = () => {
      try {
        const canvas = document.createElement('canvas');
        canvas.width = img.naturalWidth;
        canvas.height = img.naturalHeight;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0);

        // Convert to data URL
        const dataUrl = canvas.toDataURL('image/png');
        resolve(dataUrl);
      } catch (error) {
        reject(error);
      }
    };
    img.onerror = () => {
      reject(new Error('Failed to load image'));
    };
    img.src = imageUrl;
  });
};

/**
 * Convert a logo object to preview-safe format.
 * If the logo URL is local, converts it to a data URL to avoid CORS issues.
 *
 * @param {Object} logo Logo object with url and id properties.
 * @return {Promise<Object>} Promise that resolves to a logo object safe for preview.
 */
const convertLogoForPreview = async logo => {
  if (!logo || !logo.url) {
    return logo;
  }

  // If the logo URL is not local, return as-is
  if (!isLocalUrl(logo.url)) {
    return logo;
  }
  try {
    // Convert local image to data URL
    const dataUrl = await imageUrlToDataUrl(logo.url);
    return {
      ...logo,
      url: dataUrl,
      originalUrl: logo.url // Keep original URL for reference
    };
  } catch (error) {
    // If conversion fails, return original logo
    // The preview will fail to load, but the logo will still be imported correctly
    // eslint-disable-next-line no-console
    console.warn('[Image Utils] Failed to convert logo to data URL:', error);
    return logo;
  }
};

/***/ }),

/***/ "./v2/onboarding/src/utils/preload-helpers.js":
/*!****************************************************!*\
  !*** ./v2/onboarding/src/utils/preload-helpers.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addPagePreconnectHints: () => (/* binding */ addPagePreconnectHints),
/* harmony export */   addPreconnectHints: () => (/* binding */ addPreconnectHints),
/* harmony export */   removePagePreconnectHints: () => (/* binding */ removePagePreconnectHints),
/* harmony export */   removePreconnectHints: () => (/* binding */ removePreconnectHints)
/* harmony export */ });
/* harmony import */ var _data_starter_sites__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data/starter-sites */ "./v2/onboarding/src/data/starter-sites.js");
/**
 * Preload helpers for starter site previews.
 *
 * @package Athemes Starter Sites
 */



/**
 * Add preconnect and DNS prefetch hints for a preview URL.
 * Optimizes iframe loading by establishing early connections to the origin.
 *
 * @param {string} previewUrl The preview URL to add hints for.
 * @param {string} dataAttr   Optional data attribute for tracking (default: 'data-atss-preconnect').
 */
const addPreconnectHints = (previewUrl, dataAttr = 'data-atss-preconnect') => {
  if (!previewUrl) {
    return;
  }
  try {
    const url = new URL(previewUrl);
    const origin = url.origin;

    // Check if hints for this origin already exist
    const existingHint = document.querySelector(`link[${dataAttr}="${origin}"]`);
    if (existingHint) {
      return;
    }

    // DNS prefetch - resolves domain early
    const dnsPrefetch = document.createElement('link');
    dnsPrefetch.rel = 'dns-prefetch';
    dnsPrefetch.href = origin;
    dnsPrefetch.setAttribute(dataAttr, origin);
    document.head.appendChild(dnsPrefetch);

    // Preconnect - establishes early connection (DNS + TCP + TLS)
    const preconnect = document.createElement('link');
    preconnect.rel = 'preconnect';
    preconnect.href = origin;
    preconnect.setAttribute(dataAttr, origin);
    document.head.appendChild(preconnect);
  } catch (e) {

    // Invalid URL, skip silently
  }
};

/**
 * Remove preconnect hints for a specific origin or all hints.
 *
 * @param {string} origin     Optional origin to remove hints for. If not provided, removes all.
 * @param {string} dataAttr   Optional data attribute for tracking (default: 'data-atss-preconnect').
 */
const removePreconnectHints = (origin = null, dataAttr = 'data-atss-preconnect') => {
  let selector = `link[${dataAttr}]`;
  if (origin) {
    selector = `link[${dataAttr}="${origin}"]`;
  }
  const links = document.querySelectorAll(selector);
  links.forEach(link => link.remove());
};

/**
 * Add preconnect hints for an array of page URLs.
 * Used to optimize page iframe loading in the Pages step.
 *
 * @param {Array} pages Array of page objects with 'url' property.
 */
const addPagePreconnectHints = pages => {
  if (!pages || !Array.isArray(pages)) {
    return;
  }
  pages.forEach(page => {
    if (page.url) {
      addPreconnectHints(page.url, 'data-atss-page-preconnect');
    }
  });
};

/**
 * Remove all page preconnect hints.
 */
const removePagePreconnectHints = () => {
  removePreconnectHints(null, 'data-atss-page-preconnect');
};

/***/ }),

/***/ "./v2/onboarding/src/utils/preview-bridge.js":
/*!***************************************************!*\
  !*** ./v2/onboarding/src/utils/preview-bridge.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/**
 * Preview Bridge - Handles communication with the preview iframe.
 *
 * @package Athemes Starter Sites
 */

/**
 * PreviewBridge class manages all postMessage communication with preview iframe.
 */
class PreviewBridge {
  /**
   * Constructor.
   *
   * @param {string} iframeId The ID of the iframe element.
   */
  constructor(iframeId = 'demo-preview') {
    this.iframeId = iframeId;
    this.iframe = null;
    this.isReady = false;
    this.messageQueue = [];
    this.debug = window.atssOnboarding?.debug || false;
    this.messageHandler = null;
    this.pendingCustomizations = null;
    this.readyReceivedWithoutIframe = false;
  }

  /**
   * Initialize the bridge with an iframe element.
   *
   * @param {HTMLIFrameElement} iframe The iframe element.
   */
  init(iframe) {
    this.log('info', 'init() called with iframe:', iframe ? iframe.id || 'unnamed' : 'null');

    // If called with null, just set up the message handler but don't update iframe ref
    if (!iframe) {
      // Only set up message handler if not already set
      if (!this.messageHandler) {
        this.setupMessageHandler();
      }
      return;
    }

    // Skip if same iframe (avoid re-initialization)
    if (this.iframe === iframe) {
      this.log('info', 'init() called with same iframe, skipping');
      return;
    }

    // Check if we previously received PREVIEW_READY but had no iframe to send to
    const hadPendingReady = this.readyReceivedWithoutIframe;
    this.log('info', 'Initializing bridge with new iframe');
    this.iframe = iframe;
    this.readyReceivedWithoutIframe = false;

    // Set up message handler if not already set
    if (!this.messageHandler) {
      this.setupMessageHandler();
    }

    // If we had received PREVIEW_READY but couldn't send (no iframe), send now
    if (hadPendingReady && this.pendingCustomizations) {
      this.log('info', 'Had pending ready state, applying customizations now');
      this.isReady = true;
      this.batchUpdate(this.pendingCustomizations);
    }
  }

  /**
   * Set up the message handler for PREVIEW_READY signals.
   */
  setupMessageHandler() {
    // Remove previous handler if exists
    if (this.messageHandler) {
      window.removeEventListener('message', this.messageHandler);
    }

    // Create bound message handler
    this.messageHandler = event => {
      if ('ATSS_PREVIEW_READY' === event.data?.type) {
        this.log('info', 'Received ATSS_PREVIEW_READY signal');
        this.isReady = true;

        // If we don't have an iframe reference yet, remember that ready was received
        if (!this.iframe) {
          this.log('info', 'No iframe reference yet, marking readyReceivedWithoutIframe');
          this.readyReceivedWithoutIframe = true;
          return;
        }
        this.flushMessageQueue();

        // Apply pending customizations if any
        if (this.pendingCustomizations) {
          this.log('info', 'Applying pending customizations');
          this.batchUpdate(this.pendingCustomizations);
        }
      }
    };

    // Listen for iframe ready message
    window.addEventListener('message', this.messageHandler);
    this.log('info', 'Message handler set up');
  }

  /**
   * Reset the ready state when iframe navigates to a new page.
   * Call this before the iframe src changes.
   */
  resetReadyState() {
    this.isReady = false;
    this.messageQueue = [];
    this.readyReceivedWithoutIframe = false;
    this.log('info', 'Ready state reset for new page load');
  }

  /**
   * Set pending customizations to be applied when iframe becomes ready.
   *
   * @param {Object} customizations The customizations to apply.
   */
  setPendingCustomizations(customizations) {
    this.pendingCustomizations = customizations;
    this.log('info', 'Pending customizations set', customizations);
  }

  /**
   * Clear pending customizations.
   */
  clearPendingCustomizations() {
    this.pendingCustomizations = null;
  }

  /**
   * Store customizations to be re-applied when iframe navigates.
   *
   * @param {Object} updates Partial customization updates to merge.
   */
  storePendingCustomizations(updates) {
    if (!updates || 'object' !== typeof updates) {
      return;
    }
    if (!this.pendingCustomizations) {
      this.pendingCustomizations = {};
    }
    this.pendingCustomizations = {
      ...this.pendingCustomizations,
      ...updates
    };
  }

  /**
   * Send a message to the iframe.
   *
   * @param {Object} message The message object to send.
   * @return {boolean} Whether the message was sent successfully.
   */
  send(message) {
    if (!this.iframe?.contentWindow) {
      this.log('error', 'Iframe not available', message);
      return false;
    }

    // If iframe is not ready, queue the message
    if (!this.isReady) {
      this.messageQueue.push(message);
      this.log('info', 'Message queued (iframe not ready)', message);
      return false;
    }
    try {
      this.iframe.contentWindow.postMessage(message, '*');
      this.log('info', 'Message sent', message);
      return true;
    } catch (error) {
      this.log('error', 'Failed to send message', {
        message,
        error
      });
      return false;
    }
  }

  /**
   * Flush queued messages.
   */
  flushMessageQueue() {
    if (0 === this.messageQueue.length) {
      return;
    }
    this.log('info', `Flushing ${this.messageQueue.length} queued messages`);
    while (0 < this.messageQueue.length) {
      const message = this.messageQueue.shift();
      this.send(message);
    }
  }

  /**
   * Update colors in the preview.
   *
   * @param {Object} colors Object with CSS variable names as keys and color values.
   * @return {boolean} Whether the update was sent successfully.
   */
  updateColors(colors) {
    if (!colors || 'object' !== typeof colors) {
      this.log('error', 'Invalid colors object', colors);
      return false;
    }

    // Store colors to re-apply on page navigation
    this.storePendingCustomizations({
      colors
    });
    return this.send({
      type: 'ATSS_COLOR_UPDATE',
      colors
    });
  }

  /**
   * Reset colors in the preview to their original values.
   *
   * @return {boolean} Whether the reset was sent successfully.
   */
  resetColors() {
    return this.send({
      type: 'ATSS_COLOR_RESET'
    });
  }

  /**
   * Update logo in the preview.
   *
   * @param {Object} logo Logo data object with url and id.
   * @return {boolean} Whether the update was sent successfully.
   */
  updateLogo(logo) {
    if (!logo) {
      this.log('error', 'Invalid logo object', logo);
      return false;
    }

    // Store logo to re-apply on page navigation
    this.storePendingCustomizations({
      logo
    });
    return this.send({
      type: 'ATSS_LOGO_UPDATE',
      logo
    });
  }

  /**
   * Update logo height in the preview.
   *
   * @param {number} height Logo height in pixels.
   * @return {boolean} Whether the update was sent successfully.
   */
  updateLogoHeight(height) {
    // Store logo height to re-apply on page navigation
    this.storePendingCustomizations({
      logoHeight: height
    });
    return this.send({
      type: 'ATSS_LOGO_HEIGHT_UPDATE',
      height
    });
  }

  /**
   * Update site title in the preview.
   *
   * @param {string}  title     The site title.
   * @param {boolean} showTitle Whether to show the title.
   * @return {boolean} Whether the update was sent successfully.
   */
  updateSiteTitle(title, showTitle) {
    // Store site title to re-apply on page navigation
    this.storePendingCustomizations({
      title,
      showTitle
    });
    return this.send({
      type: 'ATSS_SITE_TITLE_UPDATE',
      title,
      showTitle
    });
  }

  /**
   * Update typography in the preview.
   *
   * @param {Object} typography Typography data object.
   * @return {boolean} Whether the update was sent successfully.
   */
  updateTypography(typography) {
    if (!typography || 'object' !== typeof typography) {
      this.log('error', 'Invalid typography object', typography);
      return false;
    }

    // Store typography to re-apply on page navigation
    this.storePendingCustomizations({
      typography
    });
    return this.send({
      type: 'ATSS_TYPOGRAPHY_UPDATE',
      typography
    });
  }

  /**
   * Reset typography in the preview to their original values.
   *
   * @return {boolean} Whether the reset was sent successfully.
   */
  resetTypography() {
    return this.send({
      type: 'ATSS_TYPOGRAPHY_RESET'
    });
  }

  /**
   * Send batch updates to the preview.
   *
   * @param {Object} updates Object containing multiple update types.
   * @return {boolean} Whether the update was sent successfully.
   */
  batchUpdate(updates) {
    return this.send({
      type: 'ATSS_BATCH_UPDATE',
      updates
    });
  }

  /**
   * Mark iframe as ready (for testing or manual control).
   */
  markReady() {
    this.isReady = true;
    this.flushMessageQueue();
  }

  /**
   * Log messages if debug mode is enabled.
   *
   * @param {string} level   Log level (info, warn, error).
   * @param {string} message Log message.
   * @param {*}      data    Additional data to log.
   */
  log(level, message, data) {
    if (!this.debug) {
      return;
    }
    const prefix = '[PreviewBridge]';
    /* eslint-disable no-console */
    switch (level) {
      case 'error':
        console.error(prefix, message, data);
        break;
      case 'warn':
        console.warn(prefix, message, data);
        break;
      default:
        console.log(prefix, message, data);
    }
    /* eslint-enable no-console */
  }

  /**
   * Destroy the bridge and clean up.
   */
  destroy() {
    if (this.messageHandler) {
      window.removeEventListener('message', this.messageHandler);
      this.messageHandler = null;
    }
    this.iframe = null;
    this.isReady = false;
    this.messageQueue = [];
    this.pendingCustomizations = null;
    this.readyReceivedWithoutIframe = false;
  }
}

// Create a singleton instance
const previewBridge = new PreviewBridge();
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (previewBridge);

/***/ }),

/***/ "./v2/onboarding/src/utils/use-preview-sync.js":
/*!*****************************************************!*\
  !*** ./v2/onboarding/src/utils/use-preview-sync.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useColorPreviewSync: () => (/* binding */ useColorPreviewSync),
/* harmony export */   useLogoHeightPreviewSync: () => (/* binding */ useLogoHeightPreviewSync),
/* harmony export */   useLogoPreviewSync: () => (/* binding */ useLogoPreviewSync),
/* harmony export */   usePreviewBridgeInit: () => (/* binding */ usePreviewBridgeInit),
/* harmony export */   useSiteTitlePreviewSync: () => (/* binding */ useSiteTitlePreviewSync),
/* harmony export */   useTypographyPreviewSync: () => (/* binding */ useTypographyPreviewSync)
/* harmony export */ });
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/element */ "@wordpress/element");
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _preview_bridge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./preview-bridge */ "./v2/onboarding/src/utils/preview-bridge.js");
/* harmony import */ var _image_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./image-utils */ "./v2/onboarding/src/utils/image-utils.js");
/**
 * usePreviewSync hook - Syncs wizard data with preview iframe.
 *
 * @package Athemes Starter Sites
 */





/**
 * Transform color scheme data to preview-compatible format.
 *
 * @param {string} schemeId       The selected color scheme ID.
 * @param {Array}  colorSchemes   Array of available color schemes.
 * @param {Object} customColors   Custom generated colors (if scheme is 'custom').
 * @return {Object|null} Color data ready for preview, or null if not available.
 */
const transformColors = (schemeId, colorSchemes, customColors) => {
  if (!schemeId) {
    return null;
  }

  // Handle custom colors
  if ('custom' === schemeId) {
    // Validate that customColors has actual color properties
    if (!customColors || 'object' !== typeof customColors || 0 === Object.keys(customColors).length) {
      return null;
    }
    return customColors;
  }

  // Find the selected scheme
  const selectedScheme = colorSchemes.find(scheme => scheme.id === schemeId);
  if (!selectedScheme || !selectedScheme.colors) {
    return null;
  }
  return selectedScheme.colors;
};

/**
 * Hook to sync colors with the preview iframe.
 *
 * @param {Object} options Hook options.
 * @param {string} options.selectedColorScheme   The selected color scheme ID.
 * @param {Array}  options.colorSchemes         Array of available color schemes.
 * @param {Object} options.customColors         Custom generated colors.
 * @param {number} options.debounceMs           Debounce delay in milliseconds (default: 300).
 */
const useColorPreviewSync = ({
  selectedColorScheme,
  colorSchemes = [],
  customColors = {},
  debounceMs = 300
}) => {
  const timeoutRef = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);
  (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    // Clear any pending timeout
    if (timeoutRef.current) {
      clearTimeout(timeoutRef.current);
    }

    // Debounce the color update
    timeoutRef.current = setTimeout(() => {
      const colors = transformColors(selectedColorScheme, colorSchemes, customColors);
      if (colors) {
        _preview_bridge__WEBPACK_IMPORTED_MODULE_1__["default"].updateColors(colors);
      }
    }, debounceMs);

    // Cleanup
    return () => {
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current);
      }
    };
  }, [selectedColorScheme, colorSchemes, customColors, debounceMs]);
};

/**
 * Hook to sync logo with the preview iframe.
 *
 * @param {Object} siteLogo Logo data object with url and id.
 * @param {number} logoHeight Optional logo height to include in the logo object.
 */
const useLogoPreviewSync = (siteLogo, logoHeight) => {
  (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    if (!siteLogo) {
      return;
    }

    // Convert logo to preview-safe format (handles local URLs)
    const syncLogo = async () => {
      try {
        // Include height in logo object if provided
        const logoWithHeight = logoHeight !== undefined && null !== logoHeight ? {
          ...siteLogo,
          height: logoHeight
        } : siteLogo;

        // Convert local URLs to data URLs to avoid CORS issues
        const previewSafeLogo = await (0,_image_utils__WEBPACK_IMPORTED_MODULE_2__.convertLogoForPreview)(logoWithHeight);
        _preview_bridge__WEBPACK_IMPORTED_MODULE_1__["default"].updateLogo(previewSafeLogo);
      } catch (error) {
        // If conversion fails, send original logo anyway
        // eslint-disable-next-line no-console
        console.warn('[useLogoPreviewSync] Failed to convert logo:', error);
        const logoWithHeight = logoHeight !== undefined && null !== logoHeight ? {
          ...siteLogo,
          height: logoHeight
        } : siteLogo;
        _preview_bridge__WEBPACK_IMPORTED_MODULE_1__["default"].updateLogo(logoWithHeight);
      }
    };
    syncLogo();
  }, [siteLogo, logoHeight]);
};

/**
 * Hook to sync logo height with the preview iframe.
 *
 * @param {number} logoHeight The logo height.
 */
const useLogoHeightPreviewSync = logoHeight => {
  (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    if (logoHeight !== undefined && null !== logoHeight) {
      _preview_bridge__WEBPACK_IMPORTED_MODULE_1__["default"].updateLogoHeight(logoHeight);
    }
  }, [logoHeight]);
};

/**
 * Hook to sync site title with the preview iframe.
 *
 * @param {string}  siteTitle    The site title.
 * @param {boolean} showSiteTitle Whether to show the title.
 */
const useSiteTitlePreviewSync = (siteTitle, showSiteTitle) => {
  const timeoutRef = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);
  (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    // Clear any pending timeout
    if (timeoutRef.current) {
      clearTimeout(timeoutRef.current);
    }

    // Debounce the title update
    timeoutRef.current = setTimeout(() => {
      _preview_bridge__WEBPACK_IMPORTED_MODULE_1__["default"].updateSiteTitle(siteTitle, showSiteTitle);
    }, 500);

    // Cleanup
    return () => {
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current);
      }
    };
  }, [siteTitle, showSiteTitle]);
};

/**
 * Hook to sync typography with the preview iframe.
 *
 * @param {string} selectedTypographyPair The selected typography pair ID.
 * @param {Array}  typographyPairs       Array of available typography pairs.
 */
const useTypographyPreviewSync = (selectedTypographyPair, typographyPairs) => {
  (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    if (!selectedTypographyPair) {
      return;
    }
    const selectedPair = typographyPairs.find(pair => pair.id === selectedTypographyPair);
    if (selectedPair) {
      _preview_bridge__WEBPACK_IMPORTED_MODULE_1__["default"].updateTypography(selectedPair);
    }
  }, [selectedTypographyPair, typographyPairs]);
};

/**
 * Hook to initialize the preview bridge with an iframe.
 * This hook watches for the iframe element to become available and initializes the bridge.
 *
 * @param {Object} iframeRef React ref to the iframe element.
 */
const usePreviewBridgeInit = iframeRef => {
  (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    // Initialize immediately if iframe is available
    if (iframeRef?.current) {
      _preview_bridge__WEBPACK_IMPORTED_MODULE_1__["default"].init(iframeRef.current);
    }
  }, [iframeRef]);

  // Also watch for when the iframe element becomes available (for conditional rendering)
  (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    // If iframe ref exists and has a current value, and it's different from what bridge has
    if (iframeRef?.current && _preview_bridge__WEBPACK_IMPORTED_MODULE_1__["default"].iframe !== iframeRef.current) {
      _preview_bridge__WEBPACK_IMPORTED_MODULE_1__["default"].init(iframeRef.current);
    }
  });
};

/***/ })

}]);
//# sourceMappingURL=v2_onboarding_src_components_Steps_Customize_js.js.map?ver=6a5e6445472c32f83cad