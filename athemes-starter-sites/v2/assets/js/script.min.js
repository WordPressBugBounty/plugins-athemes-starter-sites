var _dcq=_dcq||[],_dcs=_dcs||{};_dcs.account=5598225,(()=>{var t=document.createElement("script"),s=(t.type="text/javascript",t.async=!0,t.src="//tag.getdrip.com/"+_dcs.account+".js",document.getElementsByTagName("script")[0]);s.parentNode.insertBefore(t,s)})(),(d=>{function l(i,a,r){var t,s,n,e,o;r++,a.length>r&&a[r]?(s=a[r].log||"",e=Math.max(5,Math.round(100/a.length*r)),i.find(".atss-import-progress-label").html(s),i.find(".atss-import-progress-sublabel").html(e+"%"),i.find(".atss-import-progress-indicator").attr("style","--atss-indicator: "+e+"%;"),s=window.atss_localize.nonce,e=i.find('input[name="demo_id"]').val(),o=(o=i.find('input[name="builder_type"]:checked').val())||"elementor",t=i.find('input[name="content_type"]:checked').val(),delete(s=d.extend({nonce:s,demo_id:e,builder_type:o,content_type:t},a[r])).log,delete s.priority,n="atss_import_widgets"===s.action,e={url:window.atss_localize.ajax_url,type:"POST",data:s,timeout:n?18e4:12e4,success:function(t){var s;t.success?(t.status&&"newAJAX"===t.status&&r--,setTimeout(function(){l(i,a,r)},500)):(t.data?(i.find(".atss-import-step-error").addClass("atss-active").siblings().removeClass("atss-active"),i.find(".atss-import-error-log").html(t.data)):(s=window.atss_localize.i18n.import_failed,t&&(s+='<div class="atss-import-error-response">'+_.escape(t)+"</div>"),i.find(".atss-import-step-error").addClass("atss-active").siblings().removeClass("atss-active"),i.find(".atss-import-error-log").html(s)),m.removeClass("atss-import-in-progress"))},error:function(t,s,e){!n||"timeout"!==s&&"error"!==s?(i.find(".atss-import-step-error").addClass("atss-active").siblings().removeClass("atss-active"),i.find(".atss-import-error-log").html(window.atss_localize.i18n.import_failed),m.removeClass("atss-import-in-progress")):(console.log("Widget import timed out or failed, continuing with next step..."),setTimeout(function(){l(i,a,r)},500))}},d.ajax(e)):(i.find(".atss-import-progress-label").html(window.atss_localize.i18n.import_finished),i.find(".atss-import-progress-sublabel").html("100%"),i.find(".atss-import-progress-indicator").attr("style","--atss-indicator: 100%;"),o=window.atss_localize.i18n.tweet_text.replace("{0}",u),i.find(".atss-import-finish-tweet-text").html(o),i.find(".atss-import-finish-tweet-button").attr("href","https://twitter.com/intent/tweet?text="+o),setTimeout(function(){i.find(".atss-import-step").removeClass("atss-active"),i.find(".atss-import-step-finish").addClass("atss-active"),m.removeClass("atss-import-in-progress")},250),p.addClass("atss-demo-item-imported").siblings().removeClass("atss-demo-item-imported"),clearInterval(c),u=1),f=!0}function o(t,s){return!!window.atss_localize.onboardingWizardActive&&(t&&s?(m.addClass("atss-wizard-redirect-loading"),d.ajax({url:window.atss_localize.ajax_url,type:"POST",data:{action:"atss_init_wizard_from_legacy",nonce:window.atss_localize.nonce,demo_id:t,builder:s},success:function(t){t.success&&t.data.redirectUrl?window.location.href=t.data.redirectUrl:(console.error("ATSS: Failed to initialize wizard state",t),m.removeClass("atss-wizard-redirect-loading"))},error:function(t,s,e){console.error("ATSS: Wizard redirect AJAX error",e),m.removeClass("atss-wizard-redirect-loading")}}),!0):(console.error("ATSS: Cannot redirect to wizard - missing demo ID or builder"),!1))}var c,p,m=d("body"),u=1,f=!1;d(document).ready(function(){var a,i,r,t=d(".atss-notice"),n=(t.length&&t.find(".notice-dismiss").on("click",function(){t.parent().hide(),d.post(window.atss_localize.ajax_url,{action:"atss_dismissed_handler",nonce:window.atss_localize.nonce})}),d(".atss"));n.length&&(a=n.find(".atss-demo-item"),n.find(".atss-import"),i=n.find(".atss-preview"),n.on("click",".atss-demo-preview-button",function(t){t.preventDefault();var s,t=d(this),e=t.closest(".atss-demo-item"),t={preview:t.attr("href"),info:e.find(".atss-demo-info").html(),actions:e.find(".atss-demo-actions").html()};m.hasClass("atss-preview-show")?(i.find(".atss-preview-iframe").attr("src",t.preview),i.find(".atss-preview-header-info").html(t.info),i.find(".atss-preview-header-actions").html(t.actions)):(s=wp.template("atss-preview"),i.html(s(t))),m.addClass("atss-preview-show"),r=e.index(),n.trigger("atss-nav-click",[r])}),n.on("click",".atss-preview-header-arrow-prev",function(t){t.preventDefault(),d(this).hasClass("atss-disabled")||(r--,a.eq(r).find(".atss-demo-preview-button").trigger("click"))}),n.on("click",".atss-preview-header-arrow-next",function(t){t.preventDefault(),d(this).hasClass("atss-disabled")||(r++,a.eq(r).find(".atss-demo-preview-button").trigger("click"))}),n.on("click",".atss-preview-cancel-button",function(t){t.preventDefault(),m.removeClass("atss-preview-show"),i.empty()}),n.on("atss-nav-click",function(t,s){var e=n.find(".atss-preview-header-arrow-prev"),i=n.find(".atss-preview-header-arrow-next");(0===s?(e.addClass("atss-disabled"),i):(a.length-1===s?i.addClass("atss-disabled"):i.removeClass("atss-disabled"),e)).removeClass("atss-disabled")}),n.on("click",".atss-import-open-button",function(t){t.preventDefault();var t=d(this),s=t.data("demo-id"),e=t.data("builder"),i=t.data("quick");if(i&&e&&o(s,e))return;var a=window.atss_localize.demos[s],r=wp.template("atss-import");a&&a.builders.length&&(p=t.closest(".atss-demo-item"),a.args={},a.args.demoId=s,a.args.quick=i||a.builders.length<2||!1,a.args.builder=e||a.builders[0],a.args.imported=window.atss_localize.imported||f,n.find(".atss-import").html(r(a)),m.addClass("atss-import-show"))}),n.on("click",".atss-import-close-button",function(t){t.preventDefault(),m.removeClass("atss-import-show")}),n.on("click",".atss-import-toggle-button",function(t){t.preventDefault(),d(this).parent().toggleClass("atss-active")}),n.on("click",".atss-import-prev-button",function(t){t.preventDefault();t=d(this).closest(".atss-import-step");t.removeClass("atss-active"),t.prev().addClass("atss-active")}),n.on("click",".atss-import-next-button",function(t){t.preventDefault();var t=d(this).closest(".atss-import-step"),s=n.find(".atss-import-form");if(0<t.find(".atss-import-builder-select").length){var e=s.find('input[name="demo_id"]').val(),s=s.find('input[name="builder_type"]:checked').val();if(e&&s)if(o(e,s))return}t.removeClass("atss-active"),t.next().addClass("atss-active")}),n.on("change",".atss-import-builder-select input",function(t){n.find(".atss-import-plugin-builder").addClass("atss-hidden"),n.find(".atss-import-plugin-builder input").prop("checked",!1);var s,e=d(this).val();n.find("label[data-plugin-builder]").each(function(){var t=d(this),s=t.attr("data-plugin-builder");s&&s!==e?(t.addClass("atss-hidden"),t.find("input").prop("checked",!1)):s&&s===e&&(t.removeClass("atss-hidden"),t.find("input").prop("checked",!0))}),d(this).is(":checked")&&((s=n.find(".atss-import-plugin-"+d(this).data("builder-plugin"))).removeClass("atss-hidden"),s.find("input").prop("checked",!0))}),n.on("click",".atss-import-with-content-type",function(){var t=!0,s=!1;d(".atss-import-with-content-type").each(function(){d(this).is(":checked")?s=!0:t=!1}),t?n.find(".atss-import-content-select").removeClass("atss-hidden"):n.find(".atss-import-content-select").addClass("atss-hidden"),s?n.find(".atss-import-next-button").prop("disabled",!1).removeClass("disabled"):n.find(".atss-import-next-button").prop("disabled",!0).addClass("disabled")}),n.on("click",".atss-import-start-button",function(t){t.preventDefault();t=n.find(".atss-import-form");if(d(this).data("subscribe")){var s=t.find(".atss-import-subscribe-field-email"),e=s.val();if(!/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e))return void s.addClass("atss-error").attr("placeholder",window.atss_localize.i18n.invalid_email).val("");_dcq.push(["identify",{email:e,tags:[window.atss_localize.theme_name]}])}var s=d(this).closest(".atss-import-step"),i=(s.removeClass("atss-active"),s.next().addClass("atss-active"),[]);t.find("input[data-action]").each(function(t){(d(this).is(":checked")||d(this).is('[type="hidden"]'))&&i.push(d(this).data())}),i=i.sort(function(t,s){return t.priority-s.priority}),u=1,c=setInterval(function(){u++},1e3),m.addClass("atss-import-in-progress"),l(t,i,-1)}))})})(jQuery);